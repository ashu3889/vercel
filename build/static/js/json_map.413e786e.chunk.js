"use strict";(self.webpackChunkscrip_scanner=self.webpackChunkscrip_scanner||[]).push([[238],{8139:(t,e,n)=>{n.d(e,{V:()=>l});var i=n(7294),o=n(8113),r=n(6648),s=n(8328),a=n(5031);class l extends i.m{constructor(){super(...arguments),Object.defineProperty(this,"homeButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(o.$.new(this._root,{width:35,height:35,themeTags:["home"]}))}),Object.defineProperty(this,"plusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(o.$.new(this._root,{width:35,height:35,themeTags:["plus"]}))}),Object.defineProperty(this,"minusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(o.$.new(this._root,{width:35,height:35,themeTags:["minus"]}))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targetDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.set("position","absolute"),this.set("layout",this._root.verticalLayout),this.addTag("zoomtools"),this.plusButton.setAll({icon:r.A.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.minusButton.setAll({icon:r.A.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.homeButton.setAll({icon:r.A.new(this._root,{themeTags:["icon"]}),layout:void 0})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("target")){const t=this.get("target"),e=this._prevSettings.target;t&&(t instanceof a.b&&(this._targetDisposer=this.addDisposer(t.contents.on("scale",(e=>{e==t.get("minZoomLevel")?this.minusButton.set("disabled",!0):this.minusButton.set("disabled",!1),e==t.get("maxZoomLevel")?this.plusButton.set("disabled",!0):this.plusButton.set("disabled",!1)}))),this.root.events.once("frameended",(()=>{t.get("scale")==t.get("minZoomLevel")&&this.minusButton.set("disabled",!0)}))),this._disposer=new s.ZT([this.plusButton.events.on("click",(()=>{t.zoomIn()})),this.minusButton.events.on("click",(()=>{t.zoomOut()})),this.homeButton.events.on("click",(()=>{t.goHome()}))])),e&&(this._disposer&&this._disposer.dispose(),this._targetDisposer&&this._targetDisposer.dispose())}}}Object.defineProperty(l,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomTools"}),Object.defineProperty(l,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:i.m.classNames.concat([l.className])})},5031:(t,e,n)=>{n.d(e,{b:()=>c});var i=n(7294),o=n(1120),r=n(3260),s=n(1046),a=n(5788),l=n(711),u=n(730),h=n(5077);class c extends i.m{constructor(){super(...arguments),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_downX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pinchDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contents",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(i.m.new(this._root,{width:o.Q2,height:o.Q2,x:0,y:0,draggable:!0,background:r.M.new(this._root,{fill:(0,s.yW)(16777215),fillOpacity:0})}))}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();const t=this.contents.events;this._disposers.push(t.on("pointerdown",(t=>{this._handleThisDown(t)}))),this._disposers.push(t.on("globalpointerup",(t=>{this._handleThisUp(t)}))),this._disposers.push(t.on("globalpointermove",(t=>{this._handleThisMove(t)})));const e=this.contents.get("background");e&&(e.adapters.add("width",(t=>5*Number(t))),e.adapters.add("height",(t=>5*Number(t))),e.adapters.add("x",(t=>Number(t)-e.width()/5*2)),e.adapters.add("y",(t=>Number(t)-e.height()/5*2)));const n=this.contents;n.adapters.add("x",(t=>{if(h.Et(t)){let e=this.get("maxPanOut",.4),i=n.width();t=Math.min(i*e,t),t=Math.max(this.width()-i*n.get("scale",1)*(1+e),t)}return t})),n.adapters.add("y",(t=>{if(h.Et(t)){let e=this.get("maxPanOut",.4),i=n.height();t=Math.min(i*e,t),t=Math.max(this.height()-i*n.get("scale",1)*(1+e),t)}return t}))}_prepareChildren(){super._prepareChildren(),this.isDirty("wheelable")&&this._handleSetWheel(),this.contents._display.cancelTouch=this.get("pinchZoom",!1)}_handleSetWheel(){this.get("wheelable")?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=this.events.on("wheel",(t=>{const e=t.originalEvent;if(!a.ay(e,this))return;e.preventDefault();const n=this.toLocal(t.point);this._handleWheelZoom(e.deltaY,n)})),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_handleWheelZoom(t,e){let n=this.get("zoomStep",2),i=this.contents.get("scale",1),o=i;t>0?o=i/n:t<0&&(o=i*n),o!=i&&this.zoomToPoint(e,o)}zoomToPoint(t,e){e&&(e=l.s_(e,this.get("minZoomLevel",1),this.get("maxZoomLevel",32)));const n=this.contents.get("scale",1);let i=t.x,o=t.y,r=i,s=o;const a=this.contents;let u=r-(i-a.x())/n*e,h=s-(o-a.y())/n*e;return this._animateTo(u,h,e),this._za}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)/this.get("zoomStep",2))}goHome(){return this._animateTo(0,0,1)}_animateTo(t,e,n){const i=this.get("animationDuration",0),o=this.get("animationEasing"),r=this.contents;this._txa=r.animate({key:"x",to:t,duration:i,easing:o}),this._tya=r.animate({key:"y",to:e,duration:i,easing:o}),this._za=r.animate({key:"scale",to:n,duration:i,easing:o})}_handleThisUp(t){this._downPoints={}}_handleThisDown(t){const e=this.contents;this._downScale=e.get("scale",1);const n=e._downPoints;let i=u.HP(n).length;if(1==i){let e=n[1];e||(e=n[0]),e&&e.x==t.point.x&&e.y==t.point.y&&(i=0)}if(i>0){this._downX=e.x(),this._downY=e.y();const t=e._getDownPointId();if(t){let n=this._movePoints[t];n&&(e._downPoints[t]=n)}}}_handleThisMove(t){const e=t.originalEvent.pointerId;this.get("pinchZoom")&&e&&(this._movePoints[e]=t.point,u.HP(this.contents._downPoints).length>1)&&this._handlePinch()}_handlePinch(){let t=0,e=[],n=[];if(u.__(this.contents._downPoints,((i,o)=>{e[t]=o;let r=this._movePoints[i];r&&(n[t]=r),t++})),e.length>1&&n.length>1){this.contents._isDragging=!1;let t=e[0],i=e[1],o=n[0],r=n[1];if(t&&i&&o&&r){t=this.toLocal(t),i=this.toLocal(i),o=this.toLocal(o),r=this.toLocal(r);let e=Math.hypot(i.x-t.x,i.y-t.y),n=Math.hypot(r.x-o.x,r.y-o.y)/e*this._downScale,s={x:o.x+(r.x-o.x)/2,y:o.y+(r.y-o.y)/2},a={x:t.x+(i.x-t.x)/2,y:t.y+(i.y-t.y)/2},l=this._downX||0,u=this._downY||0,h=this._downScale,c=s.x-(-l+a.x)/h*n,p=s.y-(-u+a.y)/h*n;this.contents.setAll({x:c,y:p,scale:n})}}}}Object.defineProperty(c,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomableContainer"}),Object.defineProperty(c,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:i.m.classNames.concat([c.className])})},8409:(t,e,n)=>{n.d(e,{ClusteredPointSeries:()=>Ni,GraticuleSeries:()=>st,MapChart:()=>bi,MapLine:()=>Q,MapLineSeries:()=>et,MapPointSeries:()=>wi,MapPolygon:()=>Di,MapPolygonSeries:()=>Si,MapSeries:()=>s,ZoomControl:()=>Ti});var i=n(1316),o=n(7552),r=n(730);class s extends i.s{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geometries",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_geoJSONparsed",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_excluded",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_notIncluded",{enumerable:!0,configurable:!0,writable:!0,value:[]})}_afterNew(){this.fields.push("geometry","geometryType"),this._setRawDefault("geometryField","geometry"),this._setRawDefault("geometryTypeField","geometryType"),this._setRawDefault("idField","id"),this.on("geoJSON",(t=>{let e=this._prevSettings.geoJSON;e&&e!=t&&this.data.clear()})),super._afterNew()}_handleDirties(){const t=this.get("geoJSON");let e=this._prevSettings.geoJSON;e&&e!=t&&(this._prevSettings.geoJSON=void 0,this._geoJSONparsed=!1),this._geoJSONparsed||(this._parseGeoJSON(),this._geoJSONparsed=!0)}_prepareChildren(){if(super._prepareChildren(),this._valuesDirty&&this._handleDirties(),this.get("geoJSON")&&(this.isDirty("geoJSON")||this.isDirty("include")||this.isDirty("exclude"))){this._handleDirties();const t=this.chart,e=this.get("exclude");e&&(t&&(t._centerLocation=null),o.__(e,(t=>{const e=this.getDataItemById(t);e&&this._excludeDataItem(e)}))),e&&0!=e.length||(o.__(this._excluded,(t=>{this._unexcludeDataItem(t)})),this._excluded=[]);const n=this.get("include");n&&(t&&(t._centerLocation=null),o.__(this.dataItems,(t=>{const e=t.get("id");e&&-1==n.indexOf(e)?this._notIncludeDataItem(t):this._unNotIncludeDataItem(t)}))),n||(o.__(this._notIncluded,(t=>{this._unNotIncludeDataItem(t)})),this._notIncluded=[])}}_excludeDataItem(t){this._removeGeometry(t.get("geometry")),o.Cy(this._excluded,t)}_unexcludeDataItem(t){this._addGeometry(t.get("geometry"),this)}_notIncludeDataItem(t){this._removeGeometry(t.get("geometry")),o.Cy(this._notIncluded,t)}_unNotIncludeDataItem(t){this._addGeometry(t.get("geometry"),this)}checkInclude(t,e,n){if(e){if(0==e.length)return!1;if(-1==e.indexOf(t))return!1}return!(n&&n.length>0&&-1!=n.indexOf(t))}_parseGeoJSON(){const t=this.get("geoJSON");if(t){let e;"FeatureCollection"==t.type?e=t.features:"Feature"==t.type?e=[t]:-1!=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"].indexOf(t.type)?e=[{geometry:t}]:console.log("nothing found in geoJSON");const n=this.get("geodataNames");if(e){const t=this.get("idField","id");for(let i=0,s=e.length;i<s;i++){let s=e[i],a=s.geometry;if(a){let e=a.type,i=s[t];if(n&&n[i]&&(s.properties.name=n[i]),-1!=this._types.indexOf(e)){let n,l;null!=i&&(n=o.I6(this.dataItems,(t=>t.get("id")==i))),n&&(l=n.dataContext),n?l.geometry||(l.geometry=a,l.geometryType=e,n.set("geometry",a),n.set("geometryType",e),this.processDataItem(n)):(l={geometry:a,geometryType:e,madeFromGeoData:!0},l[t]=i,this.data.push(l)),r.bp(s.properties,l)}}}}const i="geodataprocessed";this.events.isEnabled(i)&&this.events.dispatch(i,{type:i,target:this})}}_placeBulletsContainer(t){this.children.moveValue(this.bulletsContainer)}_removeBulletsContainer(){}projection(){const t=this.chart;if(t)return t.get("projection")}geoPath(){const t=this.chart;if(t)return t.getPrivate("geoPath")}_addGeometry(t,e){if(t&&e.get("affectsBounds",!0)){this._geometries.push(t);const e=this.chart;e&&e.markDirtyGeometries()}}_removeGeometry(t){if(t){o.TF(this._geometries,t);const e=this.chart;e&&e.markDirtyGeometries()}}_dispose(){super._dispose();const t=this.chart;t&&t.series.removeValue(this)}_onDataClear(){super._onDataClear(),this._geoJSONparsed=!1,this._markDirtyKey("exclude")}}Object.defineProperty(s,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapSeries"}),Object.defineProperty(s,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:i.s.classNames.concat([s.className])});var a=n(5077),l=n(1120),u=n(6648);class h{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const e=this._partials;let n=0;for(let i=0;i<this._n&&i<32;i++){const o=e[i],r=t+o,s=Math.abs(t)<Math.abs(o)?t-(r-o):o-(r-t);s&&(e[n++]=s),t=r}return e[n]=t,this._n=n+1,this}valueOf(){const t=this._partials;let e,n,i,o=this._n,r=0;if(o>0){for(r=t[--o];o>0&&(e=r,n=t[--o],r=e+n,i=n-(r-e),!i););o>0&&(i<0&&t[o-1]<0||i>0&&t[o-1]>0)&&(n=2*i,e=r+n,n==e-r&&(r=e))}return r}}var c=1e-6,p=1e-12,d=Math.PI,f=d/2,g=d/4,m=2*d,_=180/d,y=d/180,v=Math.abs,b=Math.atan,w=Math.atan2,P=Math.cos,x=Math.ceil,D=Math.exp,S=(Math.floor,Math.hypot),I=Math.log,M=(Math.pow,Math.sin),j=Math.sign||function(t){return t>0?1:t<0?-1:0},C=Math.sqrt,N=Math.tan;function O(t){return t>1?f:t<-1?-f:Math.asin(t)}function T(t){return(t=M(t/2))*t}function E(){}function L(t,e){t&&X.hasOwnProperty(t.type)&&X[t.type](t,e)}var k,z,B,R,Y={Feature:function(t,e){L(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,i=-1,o=n.length;++i<o;)L(n[i].geometry,e)}},X={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)t=n[i],e.point(t[0],t[1],t[2])},LineString:function(t,e){G(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)G(n[i],e,0)},Polygon:function(t,e){Z(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,i=-1,o=n.length;++i<o;)Z(n[i],e)},GeometryCollection:function(t,e){for(var n=t.geometries,i=-1,o=n.length;++i<o;)L(n[i],e)}};function G(t,e,n){var i,o=-1,r=t.length-n;for(e.lineStart();++o<r;)i=t[o],e.point(i[0],i[1],i[2]);e.lineEnd()}function Z(t,e){var n=-1,i=t.length;for(e.polygonStart();++n<i;)G(t[n],e,1);e.polygonEnd()}function A(t,e){t&&Y.hasOwnProperty(t.type)?Y[t.type](t,e):L(t,e)}var F={sphere:E,point:E,lineStart:function(){F.point=V,F.lineEnd=W},lineEnd:E,polygonStart:E,polygonEnd:E};function W(){F.point=F.lineEnd=E}function V(t,e){z=t*=y,B=M(e*=y),R=P(e),F.point=H}function H(t,e){t*=y;var n=M(e*=y),i=P(e),o=v(t-z),r=P(o),s=i*M(o),a=R*n-B*i*r,l=B*n+R*i*r;k.add(w(C(s*s+a*a),l)),z=t,B=n,R=i}function $(t){return k=new h,A(t,F),+k}var J=[null,null],q={type:"LineString",coordinates:J};function U(t,e){return J[0]=t,J[1]=e,$(q)}class Q extends u.A{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1})}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const e=this.getPrivate("series");if(e){const n=e.chart;if(n){const i=n.get("projection");let o=null;i&&i.clipAngle&&(o=i.clipAngle(),i.precision(this.get("precision",.5)));const r=this.dataItem,s=n.getPrivate("geoPath");if(s&&r)if(this._clear=!0,"straight"==r.get("lineType",e.get("lineType"))){const t=this.get("geometry");if(t){let e=t.coordinates;if(e){let i;"LineString"==t.type?i=[e]:"MultiLineString"==t.type&&(i=e),this.set("draw",(t=>{for(let e=0;e<i.length;e++){let o=i[e];if(o.length>0){const e=o[0],i=n.convert({longitude:e[0],latitude:e[1]});t.lineTo(i.x,i.y);for(let r=0;r<o.length;r++){const e=o[r],i=n.convert({longitude:e[0],latitude:e[1]});t.lineTo(i.x,i.y)}}}}))}}}else this.set("draw",(n=>{i&&!1===e.get("clipBack")&&i.clipAngle(180),s.context(this._display),s(t),s.context(null),i&&i.clipAngle&&i.clipAngle(o)}))}}}const e="linechanged";this.events.isEnabled(e)&&this.events.dispatch(e,{type:e,target:this})}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}_getTooltipPoint(){let t=this.get("tooltipX"),e=this.get("tooltipY"),n=0,i=0;if(a.Et(t)&&(n=t),a.Et(e)&&(i=e),t instanceof l.QE){const e=this.positionToGeoPoint(t.value),o=this.getPrivate("series");if(o){const t=o.chart;if(t){const o=t.convert(e);n=o.x,i=o.y}}}return{x:n,y:i}}positionToGeoPoint(t){const e=this.get("geometry"),n=this.getPrivate("series"),i=n.chart,o=this.dataItem;if(e&&n&&i&&o){const r=o.get("lineType",n.get("lineType"));let s,a,l,u=$(e),h=0,c=0,p=0,d=e.coordinates;if(d){let n;"LineString"==e.type?n=[d]:"MultiLineString"==e.type&&(n=d);for(let e=0;e<n.length;e++){let i=n[e];if(i.length>1){for(let o=1;o<i.length;o++)if(a=i[o-1],l=i[o],c=h/u,s=U(a,l),h+=s,p=h/u,c<=t&&p>t){e=n.length;break}}else 1==i.length&&(a=i[0],l=i[0],c=0,p=1)}if(a&&l){let e,n=(t-c)/(p-c);if("straight"==r){let t=i.convert({longitude:a[0],latitude:a[1]}),e=i.convert({longitude:l[0],latitude:l[1]}),o=t.x+(e.x-t.x)*n,r=t.y+(e.y-t.y)*n;return i.invert({x:o,y:r})}return e=function(t,e){var n=t[0]*y,i=t[1]*y,o=e[0]*y,r=e[1]*y,s=P(i),a=M(i),l=P(r),u=M(r),h=s*P(n),c=s*M(n),p=l*P(o),d=l*M(o),f=2*O(C(T(r-i)+s*l*T(o-n))),g=M(f),m=f?function(t){var e=M(t*=f)/g,n=M(f-t)/g,i=n*h+e*p,o=n*c+e*d,r=n*a+e*u;return[w(o,i)*_,w(r,C(i*i+o*o))*_]}:function(){return[n*_,i*_]};return m.distance=f,m}(a,l)(n),{longitude:e[0],latitude:e[1]}}}}return{longitude:0,latitude:0}}}Object.defineProperty(Q,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLine"}),Object.defineProperty(Q,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.A.classNames.concat([Q.className])});var K=n(6873),tt=n(4923);class et extends s{constructor(){super(...arguments),Object.defineProperty(this,"mapLines",{enumerable:!0,configurable:!0,writable:!0,value:new K.TS(tt.Bj.new({}),(()=>Q._new(this._root,{},[this.mapLines.template])))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["LineString","MultiLineString"]})}_afterNew(){this.fields.push("lineType"),this._setRawDefault("lineTypeField","lineType"),super._afterNew()}makeMapLine(t){const e=this.children.push(this.mapLines.make());return e._setDataItem(t),this.mapLines.push(e),e}markDirtyProjection(){o.__(this.dataItems,(t=>{let e=t.get("mapLine");e&&e.markDirtyProjection()}))}_prepareChildren(){super._prepareChildren(),this.isDirty("stroke")&&this.mapLines.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapLine");e||(e=this.makeMapLine(t)),this._handlePointsToConnect(t),t.on("pointsToConnect",(()=>{this._handlePointsToConnect(t)})),t.set("mapLine",e),this._addGeometry(t.get("geometry"),this),e.setPrivate("series",this)}_handlePointsToConnect(t){const e=t.get("pointsToConnect");e&&(o.__(e,(e=>{e.on("geometry",(()=>{this.markDirtyValues(t)})),e.on("longitude",(()=>{this.markDirtyValues(t)})),e.on("latitude",(()=>{this.markDirtyValues(t)}))})),this.markDirtyValues(t))}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapLine");if(e){const n=t.get("pointsToConnect");if(n){let i=[];o.__(n,(t=>{const e=t.get("longitude"),n=t.get("latitude");if(null!=e&&null!=n)i.push([e,n]);else{const e=t.get("geometry");if(e){const t=e.coordinates;t&&i.push([t[0],t[1]])}}}));let r={type:"LineString",coordinates:i};t.setRaw("geometry",r),e.set("geometry",r)}else e.set("geometry",t.get("geometry"))}}}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapLine");e&&(this.mapLines.removeValue(e),e.dispose())}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapLine");e&&e.setPrivate("visible",!0)}}function nt(t,e,n){t=+t,e=+e,n=(o=arguments.length)<2?(e=t,t=0,1):o<3?1:+n;for(var i=-1,o=0|Math.max(0,Math.ceil((e-t)/n)),r=new Array(o);++i<o;)r[i]=t+i*n;return r}function it(t,e,n){var i=nt(t,e-c,n).concat(e);return function(t){return i.map((function(e){return[t,e]}))}}function ot(t,e,n){var i=nt(t,e-c,n).concat(e);return function(t){return i.map((function(e){return[e,t]}))}}function rt(){var t,e,n,i,o,r,s,a,l,u,h,p,d=10,f=d,g=90,m=360,_=2.5;function y(){return{type:"MultiLineString",coordinates:b()}}function b(){return nt(x(i/g)*g,n,g).map(h).concat(nt(x(a/m)*m,s,m).map(p)).concat(nt(x(e/d)*d,t,d).filter((function(t){return v(t%g)>c})).map(l)).concat(nt(x(r/f)*f,o,f).filter((function(t){return v(t%m)>c})).map(u))}return y.lines=function(){return b().map((function(t){return{type:"LineString",coordinates:t}}))},y.outline=function(){return{type:"Polygon",coordinates:[h(i).concat(p(s).slice(1),h(n).reverse().slice(1),p(a).reverse().slice(1))]}},y.extent=function(t){return arguments.length?y.extentMajor(t).extentMinor(t):y.extentMinor()},y.extentMajor=function(t){return arguments.length?(i=+t[0][0],n=+t[1][0],a=+t[0][1],s=+t[1][1],i>n&&(t=i,i=n,n=t),a>s&&(t=a,a=s,s=t),y.precision(_)):[[i,a],[n,s]]},y.extentMinor=function(n){return arguments.length?(e=+n[0][0],t=+n[1][0],r=+n[0][1],o=+n[1][1],e>t&&(n=e,e=t,t=n),r>o&&(n=r,r=o,o=n),y.precision(_)):[[e,r],[t,o]]},y.step=function(t){return arguments.length?y.stepMajor(t).stepMinor(t):y.stepMinor()},y.stepMajor=function(t){return arguments.length?(g=+t[0],m=+t[1],y):[g,m]},y.stepMinor=function(t){return arguments.length?(d=+t[0],f=+t[1],y):[d,f]},y.precision=function(c){return arguments.length?(_=+c,l=it(r,o,90),u=ot(e,t,_),h=it(a,s,90),p=ot(i,n,_),y):_},y.extentMajor([[-180,-89.999999],[180,89.999999]]).extentMinor([[-180,-80.000001],[180,80.000001]])}Object.defineProperty(et,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapLineSeries"}),Object.defineProperty(et,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.classNames.concat([et.className])});class st extends et{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})})}_afterNew(){super._afterNew(),this.dataItems.push(this._dataItem),this._generate()}_updateChildren(){if(super._updateChildren(),this.isDirty("step")&&this._generate(),this.isDirty("clipExtent")&&this.get("clipExtent")){const t=this.chart;t&&t.events.on("geoboundschanged",(()=>{this._generate()})),this._generate()}}_generate(){let t=rt();if(t){if(this.get("clipExtent")){const e=this.chart;if(e){const n=e.geoBounds();n&&t.extent([[n.left,n.bottom],[n.right,n.top]])}}const e=this.get("step",10);t.stepMinor([360,360]),t.stepMajor([e,e]),this._dataItem.set("geometry",t())}}}Object.defineProperty(st,"className",{enumerable:!0,configurable:!0,writable:!0,value:"GraticuleSeries"}),Object.defineProperty(st,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:et.classNames.concat([st.className])});var at=n(1685),lt=n(1539);function ut(t,e){function n(n,i){return n=t(n,i),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,i){return(n=e.invert(n,i))&&t.invert(n[0],n[1])}),n}function ht(t,e){return v(t)>d&&(t-=Math.round(t/m)*m),[t,e]}function ct(t,e,n){return(t%=m)?e||n?ut(dt(t),ft(e,n)):dt(t):e||n?ft(e,n):ht}function pt(t){return function(e,n){return v(e+=t)>d&&(e-=Math.round(e/m)*m),[e,n]}}function dt(t){var e=pt(t);return e.invert=pt(-t),e}function ft(t,e){var n=P(t),i=M(t),o=P(e),r=M(e);function s(t,e){var s=P(e),a=P(t)*s,l=M(t)*s,u=M(e),h=u*n+a*i;return[w(l*o-h*r,a*n-u*i),O(h*o+l*r)]}return s.invert=function(t,e){var s=P(e),a=P(t)*s,l=M(t)*s,u=M(e),h=u*o-l*r;return[w(l*o+u*r,a*n+h*i),O(h*n-a*i)]},s}function gt(){var t,e=[];return{point:function(e,n,i){t.push([e,n,i])},lineStart:function(){e.push(t=[])},lineEnd:E,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function mt(t,e){return v(t[0]-e[0])<c&&v(t[1]-e[1])<c}function _t(t,e,n,i){this.x=t,this.z=e,this.o=n,this.e=i,this.v=!1,this.n=this.p=null}function yt(t,e,n,i,o){var r,s,a=[],l=[];if(t.forEach((function(t){if(!((e=t.length-1)<=0)){var e,n,i=t[0],s=t[e];if(mt(i,s)){if(!i[2]&&!s[2]){for(o.lineStart(),r=0;r<e;++r)o.point((i=t[r])[0],i[1]);return void o.lineEnd()}s[0]+=2e-6}a.push(n=new _t(i,t,null,!0)),l.push(n.o=new _t(i,null,n,!1)),a.push(n=new _t(s,t,null,!1)),l.push(n.o=new _t(s,null,n,!0))}})),a.length){for(l.sort(e),vt(a),vt(l),r=0,s=l.length;r<s;++r)l[r].e=n=!n;for(var u,h,c=a[0];;){for(var p=c,d=!0;p.v;)if((p=p.n)===c)return;u=p.z,o.lineStart();do{if(p.v=p.o.v=!0,p.e){if(d)for(r=0,s=u.length;r<s;++r)o.point((h=u[r])[0],h[1]);else i(p.x,p.n.x,1,o);p=p.n}else{if(d)for(u=p.p.z,r=u.length-1;r>=0;--r)o.point((h=u[r])[0],h[1]);else i(p.x,p.p.x,-1,o);p=p.p}u=(p=p.o).z,d=!d}while(!p.v);o.lineEnd()}}}function vt(t){if(e=t.length){for(var e,n,i=0,o=t[0];++i<e;)o.n=n=t[i],n.p=o,o=n;o.n=n=t[0],n.p=o}}function bt(t){return[w(t[1],t[0]),O(t[2])]}function wt(t){var e=t[0],n=t[1],i=P(n);return[i*P(e),i*M(e),M(n)]}function Pt(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function xt(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Dt(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function St(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function It(t){var e=C(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Mt(t){return v(t[0])<=d?t[0]:j(t[0])*((v(t[0])+d)%m-d)}function jt(t){return Array.from(function*(t){for(const e of t)yield*e}(t))}function Ct(t,e,n,i){return function(o){var r,s,a,l=e(o),u=gt(),p=e(u),_=!1,y={point:v,lineStart:x,lineEnd:D,polygonStart:function(){y.point=S,y.lineStart=I,y.lineEnd=j,s=[],r=[]},polygonEnd:function(){y.point=v,y.lineStart=x,y.lineEnd=D,s=jt(s);var t=function(t,e){var n=Mt(e),i=e[1],o=M(i),r=[M(n),-P(n),0],s=0,a=0,l=new h;1===o?i=f+c:-1===o&&(i=-f-c);for(var u=0,p=t.length;u<p;++u)if(y=(_=t[u]).length)for(var _,y,v=_[y-1],b=Mt(v),x=v[1]/2+g,D=M(x),S=P(x),I=0;I<y;++I,b=C,D=T,S=E,v=j){var j=_[I],C=Mt(j),N=j[1]/2+g,T=M(N),E=P(N),L=C-b,k=L>=0?1:-1,z=k*L,B=z>d,R=D*T;if(l.add(w(R*k*M(z),S*E+R*P(z))),s+=B?L+k*m:L,B^b>=n^C>=n){var Y=xt(wt(v),wt(j));It(Y);var X=xt(r,Y);It(X);var G=(B^L>=0?-1:1)*O(X[2]);(i>G||i===G&&(Y[0]||Y[1]))&&(a+=B^L>=0?1:-1)}}return(s<-c||s<c&&l<-1e-12)^1&a}(r,i);s.length?(_||(o.polygonStart(),_=!0),yt(s,Ot,t,n,o)):t&&(_||(o.polygonStart(),_=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),_&&(o.polygonEnd(),_=!1),s=r=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}};function v(e,n){t(e,n)&&o.point(e,n)}function b(t,e){l.point(t,e)}function x(){y.point=b,l.lineStart()}function D(){y.point=v,l.lineEnd()}function S(t,e){a.push([t,e]),p.point(t,e)}function I(){p.lineStart(),a=[]}function j(){S(a[0][0],a[0][1]),p.lineEnd();var t,e,n,i,l=p.clean(),h=u.result(),c=h.length;if(a.pop(),r.push(a),a=null,c)if(1&l){if((e=(n=h[0]).length-1)>0){for(_||(o.polygonStart(),_=!0),o.lineStart(),t=0;t<e;++t)o.point((i=n[t])[0],i[1]);o.lineEnd()}}else c>1&&2&l&&h.push(h.pop().concat(h.shift())),s.push(h.filter(Nt))}return y}}function Nt(t){return t.length>1}function Ot(t,e){return((t=t.x)[0]<0?t[1]-f-c:f-t[1])-((e=e.x)[0]<0?e[1]-f-c:f-e[1])}ht.invert=ht;const Tt=Ct((function(){return!0}),(function(t){var e,n=NaN,i=NaN,o=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(r,s){var a=r>0?d:-d,l=v(r-n);v(l-d)<c?(t.point(n,i=(i+s)/2>0?f:-f),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),t.point(r,i),e=0):o!==a&&l>=d&&(v(n-o)<c&&(n-=o*c),v(r-a)<c&&(r-=a*c),i=function(t,e,n,i){var o,r,s=M(t-n);return v(s)>c?b((M(e)*(r=P(i))*M(n)-M(i)*(o=P(e))*M(t))/(o*r*s)):(e+i)/2}(n,i,r,s),t.point(o,i),t.lineEnd(),t.lineStart(),t.point(a,i),e=0),t.point(n=r,i=s),o=a},lineEnd:function(){t.lineEnd(),n=i=NaN},clean:function(){return 2-e}}}),(function(t,e,n,i){var o;if(null==t)o=n*f,i.point(-d,o),i.point(0,o),i.point(d,o),i.point(d,0),i.point(d,-o),i.point(0,-o),i.point(-d,-o),i.point(-d,0),i.point(-d,o);else if(v(t[0]-e[0])>c){var r=t[0]<e[0]?d:-d;o=n*r/2,i.point(-r,o),i.point(0,o),i.point(r,o)}else i.point(e[0],e[1])}),[-d,-f]);function Et(t,e,n,i,o,r){if(n){var s=P(e),a=M(e),l=i*n;null==o?(o=e+i*m,r=e-l/2):(o=Lt(s,o),r=Lt(s,r),(i>0?o<r:o>r)&&(o+=i*m));for(var u,h=o;i>0?h>r:h<r;h-=l)u=bt([s,-a*P(h),-a*M(h)]),t.point(u[0],u[1])}}function Lt(t,e){(e=wt(e))[0]-=t,It(e);var n,i=(n=-e[1])>1?0:n<-1?d:Math.acos(n);return((-e[2]<0?-i:i)+m-c)%m}var kt=1e9,zt=-kt;function Bt(t,e,n,i){function o(o,r){return t<=o&&o<=n&&e<=r&&r<=i}function r(o,r,a,u){var h=0,c=0;if(null==o||(h=s(o,a))!==(c=s(r,a))||l(o,r)<0^a>0)do{u.point(0===h||3===h?t:n,h>1?i:e)}while((h=(h+a+4)%4)!==c);else u.point(r[0],r[1])}function s(i,o){return v(i[0]-t)<c?o>0?0:3:v(i[0]-n)<c?o>0?2:1:v(i[1]-e)<c?o>0?1:0:o>0?3:2}function a(t,e){return l(t.x,e.x)}function l(t,e){var n=s(t,1),i=s(e,1);return n!==i?n-i:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(s){var l,u,h,c,p,d,f,g,m,_,y,v=s,b=gt(),w={point:P,lineStart:function(){w.point=x,u&&u.push(h=[]);_=!0,m=!1,f=g=NaN},lineEnd:function(){l&&(x(c,p),d&&m&&b.rejoin(),l.push(b.result()));w.point=P,m&&v.lineEnd()},polygonStart:function(){v=b,l=[],u=[],y=!0},polygonEnd:function(){var e=function(){for(var e=0,n=0,o=u.length;n<o;++n)for(var r,s,a=u[n],l=1,h=a.length,c=a[0],p=c[0],d=c[1];l<h;++l)r=p,s=d,p=(c=a[l])[0],d=c[1],s<=i?d>i&&(p-r)*(i-s)>(d-s)*(t-r)&&++e:d<=i&&(p-r)*(i-s)<(d-s)*(t-r)&&--e;return e}(),n=y&&e,o=(l=jt(l)).length;(n||o)&&(s.polygonStart(),n&&(s.lineStart(),r(null,null,1,s),s.lineEnd()),o&&yt(l,a,e,r,s),s.polygonEnd());v=s,l=u=h=null}};function P(t,e){o(t,e)&&v.point(t,e)}function x(r,s){var a=o(r,s);if(u&&h.push([r,s]),_)c=r,p=s,d=a,_=!1,a&&(v.lineStart(),v.point(r,s));else if(a&&m)v.point(r,s);else{var l=[f=Math.max(zt,Math.min(kt,f)),g=Math.max(zt,Math.min(kt,g))],b=[r=Math.max(zt,Math.min(kt,r)),s=Math.max(zt,Math.min(kt,s))];!function(t,e,n,i,o,r){var s,a=t[0],l=t[1],u=0,h=1,c=e[0]-a,p=e[1]-l;if(s=n-a,c||!(s>0)){if(s/=c,c<0){if(s<u)return;s<h&&(h=s)}else if(c>0){if(s>h)return;s>u&&(u=s)}if(s=o-a,c||!(s<0)){if(s/=c,c<0){if(s>h)return;s>u&&(u=s)}else if(c>0){if(s<u)return;s<h&&(h=s)}if(s=i-l,p||!(s>0)){if(s/=p,p<0){if(s<u)return;s<h&&(h=s)}else if(p>0){if(s>h)return;s>u&&(u=s)}if(s=r-l,p||!(s<0)){if(s/=p,p<0){if(s>h)return;s>u&&(u=s)}else if(p>0){if(s<u)return;s<h&&(h=s)}return u>0&&(t[0]=a+u*c,t[1]=l+u*p),h<1&&(e[0]=a+h*c,e[1]=l+h*p),!0}}}}}(l,b,t,e,n,i)?a&&(v.lineStart(),v.point(r,s),y=!1):(m||(v.lineStart(),v.point(l[0],l[1])),v.point(b[0],b[1]),a||v.lineEnd(),y=!1)}f=r,g=s,m=a}return w}}const Rt=t=>t;function Yt(t){return function(e){var n=new Xt;for(var i in t)n[i]=t[i];return n.stream=e,n}}function Xt(){}Xt.prototype={constructor:Xt,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var Gt=1/0,Zt=Gt,At=-Gt,Ft=At,Wt={point:function(t,e){t<Gt&&(Gt=t);t>At&&(At=t);e<Zt&&(Zt=e);e>Ft&&(Ft=e)},lineStart:E,lineEnd:E,polygonStart:E,polygonEnd:E,result:function(){var t=[[Gt,Zt],[At,Ft]];return At=Ft=-(Zt=Gt=1/0),t}};const Vt=Wt;function Ht(t,e,n){var i=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=i&&t.clipExtent(null),A(n,t.stream(Vt)),e(Vt.result()),null!=i&&t.clipExtent(i),t}function $t(t,e,n){return Ht(t,(function(n){var i=e[1][0]-e[0][0],o=e[1][1]-e[0][1],r=Math.min(i/(n[1][0]-n[0][0]),o/(n[1][1]-n[0][1])),s=+e[0][0]+(i-r*(n[1][0]+n[0][0]))/2,a=+e[0][1]+(o-r*(n[1][1]+n[0][1]))/2;t.scale(150*r).translate([s,a])}),n)}var Jt=P(30*y);function qt(t,e){return+e?function(t,e){function n(i,o,r,s,a,l,u,h,p,d,f,g,m,_){var y=u-i,b=h-o,P=y*y+b*b;if(P>4*e&&m--){var x=s+d,D=a+f,S=l+g,I=C(x*x+D*D+S*S),M=O(S/=I),j=v(v(S)-1)<c||v(r-p)<c?(r+p)/2:w(D,x),N=t(j,M),T=N[0],E=N[1],L=T-i,k=E-o,z=b*L-y*k;(z*z/P>e||v((y*L+b*k)/P-.5)>.3||s*d+a*f+l*g<Jt)&&(n(i,o,r,s,a,l,T,E,j,x/=I,D/=I,S,m,_),_.point(T,E),n(T,E,j,x,D,S,u,h,p,d,f,g,m,_))}}return function(e){var i,o,r,s,a,l,u,h,c,p,d,f,g={point:m,lineStart:_,lineEnd:v,polygonStart:function(){e.polygonStart(),g.lineStart=b},polygonEnd:function(){e.polygonEnd(),g.lineStart=_}};function m(n,i){n=t(n,i),e.point(n[0],n[1])}function _(){h=NaN,g.point=y,e.lineStart()}function y(i,o){var r=wt([i,o]),s=t(i,o);n(h,c,u,p,d,f,h=s[0],c=s[1],u=i,p=r[0],d=r[1],f=r[2],16,e),e.point(h,c)}function v(){g.point=m,e.lineEnd()}function b(){_(),g.point=w,g.lineEnd=P}function w(t,e){y(i=t,e),o=h,r=c,s=p,a=d,l=f,g.point=y}function P(){n(h,c,u,p,d,f,o,r,i,s,a,l,16,e),g.lineEnd=v,v()}return g}}(t,e):function(t){return Yt({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}(t)}var Ut=Yt({point:function(t,e){this.stream.point(t*y,e*y)}});function Qt(t,e,n,i,o,r){if(!r)return function(t,e,n,i,o){function r(r,s){return[e+t*(r*=i),n-t*(s*=o)]}return r.invert=function(r,s){return[(r-e)/t*i,(n-s)/t*o]},r}(t,e,n,i,o);var s=P(r),a=M(r),l=s*t,u=a*t,h=s/t,c=a/t,p=(a*n-s*e)/t,d=(a*e+s*n)/t;function f(t,r){return[l*(t*=i)-u*(r*=o)+e,n-u*t-l*r]}return f.invert=function(t,e){return[i*(h*t-c*e+p),o*(d-c*t-h*e)]},f}function Kt(t){return function(t){var e,n,i,o,r,s,a,l,u,h,p=150,f=480,g=250,m=0,b=0,w=0,x=0,D=0,S=0,I=1,M=1,j=null,N=Tt,O=null,T=Rt,E=.5;function L(t){return l(t[0]*y,t[1]*y)}function k(t){return(t=l.invert(t[0],t[1]))&&[t[0]*_,t[1]*_]}function z(){var t=Qt(p,0,0,I,M,S).apply(null,e(m,b)),i=Qt(p,f-t[0],g-t[1],I,M,S);return n=ct(w,x,D),a=ut(e,i),l=ut(n,a),s=qt(a,E),B()}function B(){return u=h=null,L}return L.stream=function(t){return u&&h===t?u:u=Ut(function(t){return Yt({point:function(e,n){var i=t(e,n);return this.stream.point(i[0],i[1])}})}(n)(N(s(T(h=t)))))},L.preclip=function(t){return arguments.length?(N=t,j=void 0,B()):N},L.postclip=function(t){return arguments.length?(T=t,O=i=o=r=null,B()):T},L.clipAngle=function(t){return arguments.length?(N=+t?function(t){var e=P(t),n=2*y,i=e>0,o=v(e)>c;function r(t,n){return P(t)*P(n)>e}function s(t,n,i){var o=[1,0,0],r=xt(wt(t),wt(n)),s=Pt(r,r),a=r[0],l=s-a*a;if(!l)return!i&&t;var u=e*s/l,h=-e*a/l,p=xt(o,r),f=St(o,u);Dt(f,St(r,h));var g=p,m=Pt(f,g),_=Pt(g,g),y=m*m-_*(Pt(f,f)-1);if(!(y<0)){var b=C(y),w=St(g,(-m-b)/_);if(Dt(w,f),w=bt(w),!i)return w;var P,x=t[0],D=n[0],S=t[1],I=n[1];D<x&&(P=x,x=D,D=P);var M=D-x,j=v(M-d)<c;if(!j&&I<S&&(P=S,S=I,I=P),j||M<c?j?S+I>0^w[1]<(v(w[0]-x)<c?S:I):S<=w[1]&&w[1]<=I:M>d^(x<=w[0]&&w[0]<=D)){var N=St(g,(-m+b)/_);return Dt(N,f),[w,bt(N)]}}}function a(e,n){var o=i?t:d-t,r=0;return e<-o?r|=1:e>o&&(r|=2),n<-o?r|=4:n>o&&(r|=8),r}return Ct(r,(function(t){var e,n,l,u,h;return{lineStart:function(){u=l=!1,h=1},point:function(c,p){var f,g=[c,p],m=r(c,p),_=i?m?0:a(c,p):m?a(c+(c<0?d:-d),p):0;if(!e&&(u=l=m)&&t.lineStart(),m!==l&&(!(f=s(e,g))||mt(e,f)||mt(g,f))&&(g[2]=1),m!==l)h=0,m?(t.lineStart(),f=s(g,e),t.point(f[0],f[1])):(f=s(e,g),t.point(f[0],f[1],2),t.lineEnd()),e=f;else if(o&&e&&i^m){var y;_&n||!(y=s(g,e,!0))||(h=0,i?(t.lineStart(),t.point(y[0][0],y[0][1]),t.point(y[1][0],y[1][1]),t.lineEnd()):(t.point(y[1][0],y[1][1]),t.lineEnd(),t.lineStart(),t.point(y[0][0],y[0][1],3)))}!m||e&&mt(e,g)||t.point(g[0],g[1]),e=g,l=m,n=_},lineEnd:function(){l&&t.lineEnd(),e=null},clean:function(){return h|(u&&l)<<1}}}),(function(e,i,o,r){Et(r,t,n,o,e,i)}),i?[0,-t]:[-d,t-d])}(j=t*y):(j=null,Tt),B()):j*_},L.clipExtent=function(t){return arguments.length?(T=null==t?(O=i=o=r=null,Rt):Bt(O=+t[0][0],i=+t[0][1],o=+t[1][0],r=+t[1][1]),B()):null==O?null:[[O,i],[o,r]]},L.scale=function(t){return arguments.length?(p=+t,z()):p},L.translate=function(t){return arguments.length?(f=+t[0],g=+t[1],z()):[f,g]},L.center=function(t){return arguments.length?(m=t[0]%360*y,b=t[1]%360*y,z()):[m*_,b*_]},L.rotate=function(t){return arguments.length?(w=t[0]%360*y,x=t[1]%360*y,D=t.length>2?t[2]%360*y:0,z()):[w*_,x*_,D*_]},L.angle=function(t){return arguments.length?(S=t%360*y,z()):S*_},L.reflectX=function(t){return arguments.length?(I=t?-1:1,z()):I<0},L.reflectY=function(t){return arguments.length?(M=t?-1:1,z()):M<0},L.precision=function(t){return arguments.length?(s=qt(a,E=t*t),B()):C(E)},L.fitExtent=function(t,e){return $t(L,t,e)},L.fitSize=function(t,e){return function(t,e,n){return $t(t,[[0,0],e],n)}(L,t,e)},L.fitWidth=function(t,e){return function(t,e,n){return Ht(t,(function(n){var i=+e,o=i/(n[1][0]-n[0][0]),r=(i-o*(n[1][0]+n[0][0]))/2,s=-o*n[0][1];t.scale(150*o).translate([r,s])}),n)}(L,t,e)},L.fitHeight=function(t,e){return function(t,e,n){return Ht(t,(function(n){var i=+e,o=i/(n[1][1]-n[0][1]),r=-o*n[0][0],s=(i-o*(n[1][1]+n[0][1]))/2;t.scale(150*o).translate([r,s])}),n)}(L,t,e)},function(){return e=t.apply(this,arguments),L.invert=e.invert&&k,z()}}((function(){return t}))()}function te(t,e){return[t,I(N((f+e)/2))]}function ee(){return function(t){var e,n,i,o=Kt(t),r=o.center,s=o.scale,a=o.translate,l=o.clipExtent,u=null;function h(){var r=d*s(),a=o(function(t){function e(e){return(e=t(e[0]*y,e[1]*y))[0]*=_,e[1]*=_,e}return t=ct(t[0]*y,t[1]*y,t.length>2?t[2]*y:0),e.invert=function(e){return(e=t.invert(e[0]*y,e[1]*y))[0]*=_,e[1]*=_,e},e}(o.rotate()).invert([0,0]));return l(null==u?[[a[0]-r,a[1]-r],[a[0]+r,a[1]+r]]:t===te?[[Math.max(a[0]-r,u),e],[Math.min(a[0]+r,n),i]]:[[u,Math.max(a[1]-r,e)],[n,Math.min(a[1]+r,i)]])}return o.scale=function(t){return arguments.length?(s(t),h()):s()},o.translate=function(t){return arguments.length?(a(t),h()):a()},o.center=function(t){return arguments.length?(r(t),h()):r()},o.clipExtent=function(t){return arguments.length?(null==t?u=e=n=i=null:(u=+t[0][0],e=+t[0][1],n=+t[1][0],i=+t[1][1]),h()):null==u?null:[[u,e],[n,i]]},h()}(te).scale(961/m)}te.invert=function(t,e){return[t,2*b(D(e))-f]};var ne=n(5799);class ie extends at.S{setupDefaultRules(){super.setupDefaultRules();const t=this._root.interfaceColors,e=this.rule.bind(this);e("MapChart").setAll({projection:ee(),panX:"translateX",panY:"translateY",pinchZoom:!0,zoomStep:2,zoomLevel:1,rotationX:0,rotationY:0,rotationZ:0,maxZoomLevel:32,minZoomLevel:1,wheelY:"zoom",wheelX:"none",animationEasing:ne.FD(ne.tA),wheelEasing:ne.FD(ne.tA),wheelDuration:0,wheelSensitivity:1,maxPanOut:.4,centerMapOnZoomOut:!0});{const n=e("MapLine");n.setAll({precision:.5,role:"figure"}),(0,lt.w)(n,"stroke",t,"grid")}e("MapPolygonSeries").setAll({affectsBounds:!0}),e("MapPointSeries").setAll({affectsBounds:!1,clipFront:!1,clipBack:!0,autoScale:!1}),e("ClusteredPointSeries").setAll({minDistance:20,scatterDistance:3,scatterRadius:8,stopClusterZoom:.95}),e("MapLineSeries").setAll({affectsBounds:!1});{const n=e("MapPolygon");n.setAll({precision:.5,isMeasured:!1,role:"figure",fillOpacity:1,position:"absolute",strokeWidth:.2,strokeOpacity:1}),(0,lt.w)(n,"fill",t,"primaryButton"),(0,lt.w)(n,"stroke",t,"background")}e("Button",["zoomtools","home"]).setAll({visible:!1}),e("GraticuleSeries").setAll({step:10})}}var oe,re,se,ae,le=n(6209),ue=n(3260),he=new h,ce=new h,pe={point:E,lineStart:E,lineEnd:E,polygonStart:function(){pe.lineStart=de,pe.lineEnd=me},polygonEnd:function(){pe.lineStart=pe.lineEnd=pe.point=E,he.add(v(ce)),ce=new h},result:function(){var t=he/2;return he=new h,t}};function de(){pe.point=fe}function fe(t,e){pe.point=ge,oe=se=t,re=ae=e}function ge(t,e){ce.add(ae*t-se*e),se=t,ae=e}function me(){ge(oe,re)}const _e=pe;var ye,ve,be,we,Pe=0,xe=0,De=0,Se=0,Ie=0,Me=0,je=0,Ce=0,Ne=0,Oe={point:Te,lineStart:Ee,lineEnd:ze,polygonStart:function(){Oe.lineStart=Be,Oe.lineEnd=Re},polygonEnd:function(){Oe.point=Te,Oe.lineStart=Ee,Oe.lineEnd=ze},result:function(){var t=Ne?[je/Ne,Ce/Ne]:Me?[Se/Me,Ie/Me]:De?[Pe/De,xe/De]:[NaN,NaN];return Pe=xe=De=Se=Ie=Me=je=Ce=Ne=0,t}};function Te(t,e){Pe+=t,xe+=e,++De}function Ee(){Oe.point=Le}function Le(t,e){Oe.point=ke,Te(be=t,we=e)}function ke(t,e){var n=t-be,i=e-we,o=C(n*n+i*i);Se+=o*(be+t)/2,Ie+=o*(we+e)/2,Me+=o,Te(be=t,we=e)}function ze(){Oe.point=Te}function Be(){Oe.point=Ye}function Re(){Xe(ye,ve)}function Ye(t,e){Oe.point=Xe,Te(ye=be=t,ve=we=e)}function Xe(t,e){var n=t-be,i=e-we,o=C(n*n+i*i);Se+=o*(be+t)/2,Ie+=o*(we+e)/2,Me+=o,je+=(o=we*t-be*e)*(be+t),Ce+=o*(we+e),Ne+=3*o,Te(be=t,we=e)}const Ge=Oe;function Ze(t){this._context=t}Ze.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,m)}},result:E};var Ae,Fe,We,Ve,He,$e=new h,Je={point:E,lineStart:function(){Je.point=qe},lineEnd:function(){Ae&&Ue(Fe,We),Je.point=E},polygonStart:function(){Ae=!0},polygonEnd:function(){Ae=null},result:function(){var t=+$e;return $e=new h,t}};function qe(t,e){Je.point=Ue,Fe=Ve=t,We=He=e}function Ue(t,e){Ve-=t,He-=e,$e.add(C(Ve*Ve+He*He)),Ve=t,He=e}const Qe=Je;let Ke,tn,en,nn;class on{constructor(t){this._append=null==t?rn:function(t){const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);if(e>15)return rn;if(e!==Ke){const t=10**e;Ke=e,tn=function(e){let n=1;this._+=e[0];for(const i=e.length;n<i;++n)this._+=Math.round(arguments[n]*t)/t+e[n]}}return tn}(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(t,e){switch(this._point){case 0:this._append`M${t},${e}`,this._point=1;break;case 1:this._append`L${t},${e}`;break;default:if(this._append`M${t},${e}`,this._radius!==en||this._append!==tn){const t=this._radius,e=this._;this._="",this._append`m0,${t}a${t},${t} 0 1,1 0,${-2*t}a${t},${t} 0 1,1 0,${2*t}z`,en=t,tn=this._append,nn=this._,this._=e}this._+=nn}}result(){const t=this._;return this._="",t.length?t:null}}function rn(t){let e=1;this._+=t[0];for(const n=t.length;e<n;++e)this._+=arguments[e]+t[e]}var sn,an,ln,un,hn,cn,pn,dn,fn,gn,mn,_n,yn,vn,bn,wn,Pn=n(1046),xn=n(3305),Dn=n(711),Sn={sphere:E,point:In,lineStart:jn,lineEnd:On,polygonStart:function(){Sn.lineStart=Tn,Sn.lineEnd=En},polygonEnd:function(){Sn.lineStart=jn,Sn.lineEnd=On}};function In(t,e){t*=y;var n=P(e*=y);Mn(n*P(t),n*M(t),M(e))}function Mn(t,e,n){++sn,ln+=(t-ln)/sn,un+=(e-un)/sn,hn+=(n-hn)/sn}function jn(){Sn.point=Cn}function Cn(t,e){t*=y;var n=P(e*=y);vn=n*P(t),bn=n*M(t),wn=M(e),Sn.point=Nn,Mn(vn,bn,wn)}function Nn(t,e){t*=y;var n=P(e*=y),i=n*P(t),o=n*M(t),r=M(e),s=w(C((s=bn*r-wn*o)*s+(s=wn*i-vn*r)*s+(s=vn*o-bn*i)*s),vn*i+bn*o+wn*r);an+=s,cn+=s*(vn+(vn=i)),pn+=s*(bn+(bn=o)),dn+=s*(wn+(wn=r)),Mn(vn,bn,wn)}function On(){Sn.point=In}function Tn(){Sn.point=Ln}function En(){kn(_n,yn),Sn.point=In}function Ln(t,e){_n=t,yn=e,t*=y,e*=y,Sn.point=kn;var n=P(e);vn=n*P(t),bn=n*M(t),wn=M(e),Mn(vn,bn,wn)}function kn(t,e){t*=y;var n=P(e*=y),i=n*P(t),o=n*M(t),r=M(e),s=bn*r-wn*o,a=wn*i-vn*r,l=vn*o-bn*i,u=S(s,a,l),h=O(u),c=u&&-h/u;fn.add(c*s),gn.add(c*a),mn.add(c*l),an+=h,cn+=h*(vn+(vn=i)),pn+=h*(bn+(bn=o)),dn+=h*(wn+(wn=r)),Mn(vn,bn,wn)}var zn,Bn,Rn,Yn,Xn,Gn,Zn,An,Fn,Wn,Vn,Hn,$n,Jn,qn,Un,Qn=new h,Kn=new h,ti={point:E,lineStart:E,lineEnd:E,polygonStart:function(){Qn=new h,ti.lineStart=ei,ti.lineEnd=ni},polygonEnd:function(){var t=+Qn;Kn.add(t<0?m+t:t),this.lineStart=this.lineEnd=this.point=E},sphere:function(){Kn.add(m)}};function ei(){ti.point=ii}function ni(){oi(zn,Bn)}function ii(t,e){ti.point=oi,zn=t,Bn=e,Rn=t*=y,Yn=P(e=(e*=y)/2+g),Xn=M(e)}function oi(t,e){var n=(t*=y)-Rn,i=n>=0?1:-1,o=i*n,r=P(e=(e*=y)/2+g),s=M(e),a=Xn*s,l=Yn*r+a*P(o),u=a*i*M(o);Qn.add(w(u,l)),Rn=t,Yn=r,Xn=s}function ri(t){return Kn=new h,A(t,ti),2*Kn}var si={point:ai,lineStart:ui,lineEnd:hi,polygonStart:function(){si.point=ci,si.lineStart=pi,si.lineEnd=di,Jn=new h,ti.polygonStart()},polygonEnd:function(){ti.polygonEnd(),si.point=ai,si.lineStart=ui,si.lineEnd=hi,Qn<0?(Gn=-(An=180),Zn=-(Fn=90)):Jn>c?Fn=90:Jn<-c&&(Zn=-90),Un[0]=Gn,Un[1]=An},sphere:function(){Gn=-(An=180),Zn=-(Fn=90)}};function ai(t,e){qn.push(Un=[Gn=t,An=t]),e<Zn&&(Zn=e),e>Fn&&(Fn=e)}function li(t,e){var n=wt([t*y,e*y]);if($n){var i=xt($n,n),o=xt([i[1],-i[0],0],i);It(o),o=bt(o);var r,s=t-Wn,a=s>0?1:-1,l=o[0]*_*a,u=v(s)>180;u^(a*Wn<l&&l<a*t)?(r=o[1]*_)>Fn&&(Fn=r):u^(a*Wn<(l=(l+360)%360-180)&&l<a*t)?(r=-o[1]*_)<Zn&&(Zn=r):(e<Zn&&(Zn=e),e>Fn&&(Fn=e)),u?t<Wn?fi(Gn,t)>fi(Gn,An)&&(An=t):fi(t,An)>fi(Gn,An)&&(Gn=t):An>=Gn?(t<Gn&&(Gn=t),t>An&&(An=t)):t>Wn?fi(Gn,t)>fi(Gn,An)&&(An=t):fi(t,An)>fi(Gn,An)&&(Gn=t)}else qn.push(Un=[Gn=t,An=t]);e<Zn&&(Zn=e),e>Fn&&(Fn=e),$n=n,Wn=t}function ui(){si.point=li}function hi(){Un[0]=Gn,Un[1]=An,si.point=ai,$n=null}function ci(t,e){if($n){var n=t-Wn;Jn.add(v(n)>180?n+(n>0?360:-360):n)}else Vn=t,Hn=e;ti.point(t,e),li(t,e)}function pi(){ti.lineStart()}function di(){ci(Vn,Hn),ti.lineEnd(),v(Jn)>c&&(Gn=-(An=180)),Un[0]=Gn,Un[1]=An,$n=null}function fi(t,e){return(e-=t)<0?e+360:e}function gi(t,e){return t[0]-e[0]}function mi(t,e){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}function _i(t){const e=function(t){sn=an=ln=un=hn=cn=pn=dn=0,fn=new h,gn=new h,mn=new h,A(t,Sn);var e=+fn,n=+gn,i=+mn,o=S(e,n,i);return o<p&&(e=cn,n=pn,i=dn,an<c&&(e=ln,n=un,i=hn),(o=S(e,n,i))<p)?[NaN,NaN]:[w(n,e)*_,O(i/o)*_]}(t);return{longitude:e[0],latitude:e[1]}}function yi(t){const e=function(t){var e,n,i,o,r,s,a;if(Fn=An=-(Gn=Zn=1/0),qn=[],A(t,si),n=qn.length){for(qn.sort(gi),e=1,r=[i=qn[0]];e<n;++e)mi(i,(o=qn[e])[0])||mi(i,o[1])?(fi(i[0],o[1])>fi(i[0],i[1])&&(i[1]=o[1]),fi(o[0],i[1])>fi(i[0],i[1])&&(i[0]=o[0])):r.push(i=o);for(s=-1/0,e=0,i=r[n=r.length-1];e<=n;i=o,++e)o=r[e],(a=fi(i[1],o[0]))>s&&(s=a,Gn=o[0],An=i[1])}return qn=Un=null,Gn===1/0||Zn===1/0?[[NaN,NaN],[NaN,NaN]]:[[Gn,Zn],[An,Fn]]}(t);if(e){const t={left:e[0][0],right:e[1][0],top:e[1][1],bottom:e[0][1]};return t.right<t.left&&(t.right=180,t.left=-180),t}return{left:0,right:0,top:0,bottom:0}}var vi=n(5788);class bi extends le.d{constructor(){super(...arguments),Object.defineProperty(this,"_downTranslateX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downTranslateY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationX",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationY",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_downRotationZ",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pLat",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pLon",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downZoomLevel",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_doubleDownDistance",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_dirtyGeometries",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_geometryColection",{enumerable:!0,configurable:!0,writable:!0,value:{type:"GeometryCollection",geometries:[]}}),Object.defineProperty(this,"_centerLocation",{enumerable:!0,configurable:!0,writable:!0,value:null}),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rxa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_rya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapBounds",{enumerable:!0,configurable:!0,writable:!0,value:[[0,0],[0,0]]}),Object.defineProperty(this,"_geoCentroid",{enumerable:!0,configurable:!0,writable:!0,value:{longitude:0,latitude:0}}),Object.defineProperty(this,"_geoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_prevGeoBounds",{enumerable:!0,configurable:!0,writable:!0,value:{left:0,right:0,top:0,bottom:0}}),Object.defineProperty(this,"_dispatchBounds",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pw",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_ph",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_mapFitted",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"_centerX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_centerY",{enumerable:!0,configurable:!0,writable:!0,value:0})}_makeGeoPath(){const t=this.get("projection"),e=function(t,e){let n,i,o=3,r=4.5;function s(t){return t&&("function"===typeof r&&i.pointRadius(+r.apply(this,arguments)),A(t,n(i))),i.result()}return s.area=function(t){return A(t,n(_e)),_e.result()},s.measure=function(t){return A(t,n(Qe)),Qe.result()},s.bounds=function(t){return A(t,n(Vt)),Vt.result()},s.centroid=function(t){return A(t,n(Ge)),Ge.result()},s.projection=function(e){return arguments.length?(n=null==e?(t=null,Rt):(t=e).stream,s):t},s.context=function(t){return arguments.length?(i=null==t?(e=null,new on(o)):new Ze(e=t),"function"!==typeof r&&i.pointRadius(r),s):e},s.pointRadius=function(t){return arguments.length?(r="function"===typeof t?t:(i.pointRadius(+t),+t),s):r},s.digits=function(t){if(!arguments.length)return o;if(null==t)o=null;else{const e=Math.floor(t);if(!(e>=0))throw new RangeError(`invalid digits: ${t}`);o=e}return null===e&&(i=new on(o)),s},s.projection(t).digits(o).context(e)}();e.projection(t),this.setPrivateRaw("geoPath",e)}geoPoint(){return this.invert(this.seriesContainer.toGlobal({x:this.width()/2,y:this.height()/2}))}geoCentroid(){return this._geoCentroid}geoBounds(){return this._geoBounds}_handleSetWheel(){const t=this.get("wheelX"),e=this.get("wheelY"),n=this.chartContainer;"none"!=t||"none"!=e?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=n.events.on("wheel",(i=>{const o=this.get("wheelEasing"),r=this.get("wheelSensitivity",1),s=this.get("wheelDuration",0),a=i.originalEvent;if(!vi.ay(a,this))return;a.preventDefault();const l=n._display.toLocal(i.point);"zoom"==e?this._handleWheelZoom(a.deltaY,l):"rotateY"==e?this._handleWheelRotateY(a.deltaY/5*r,s,o):"rotateX"==e&&this._handleWheelRotateX(a.deltaY/5*r,s,o),"zoom"==t?this._handleWheelZoom(a.deltaX,l):"rotateY"==t?this._handleWheelRotateY(a.deltaX/5*r,s,o):"rotateX"==t&&this._handleWheelRotateX(a.deltaX/5*r,s,o)})),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_prepareChildren(){super._prepareChildren();const t=this.get("projection"),e=this.innerWidth(),n=this.innerHeight(),i=this._geometryColection.geometries;if(this.isDirty("projection")){this._makeGeoPath(),this.markDirtyProjection(),this._fitMap(),t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),t.rotate&&t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]);let i=this._prevSettings.projection;if(i&&i!=t){let o=e/2,r=n/2;if(i.invert){let e=i.invert([o,r]);if(e){let n=t(e);if(n){let e=t.translate(),i=o-(n[0]-e[0]),s=r-(n[1]-e[1]);t.translate([i,s]),this.setRaw("translateX",i),this.setRaw("translateY",s)}}}}}if((this.isDirty("wheelX")||this.isDirty("wheelY"))&&this._handleSetWheel(),this._dirtyGeometries&&(this._geometryColection.geometries=[],this.series.each((t=>{o.iI(this._geometryColection.geometries,t._geometries)})),this._fitMap()),0!=i.length&&(e!=this._pw||n!=this._ph||this._dirtyGeometries)&&e>0&&n>0){let i=e/2,o=n/2;t.fitSize([e,n],this._geometryColection);const r=t.scale();if(this.setPrivateRaw("mapScale",r),t.scale(r*this.get("zoomLevel",1)),this._centerLocation){let e=t(this._centerLocation);if(e){let n=t.translate(),r=i-(e[0]-n[0]),s=o-(e[1]-n[1]);t.translate([r,s]),this.setRaw("translateX",r),this.setRaw("translateY",s),this._centerX=n[0],this._centerY=n[1]}}this.markDirtyProjection();const s=this.getPrivate("geoPath");this._mapBounds=s.bounds(this._geometryColection)}if(this._pw=e,this._ph=n,this.isDirty("zoomControl")){const t=this._prevSettings.zoomControl,e=this.get("zoomControl");e!==t&&(this._disposeProperty("zoomControl"),t&&t.dispose(),e&&(e.setPrivate("chart",this),this.children.push(e)),this.setRaw("zoomControl",e))}if(this.isDirty("zoomLevel")){t.scale(this.getPrivate("mapScale")*this.get("zoomLevel",1)),this.markDirtyProjection(),this.series.each((t=>{t.isType("MapPointSeries")&&t.get("autoScale")&&o.__(t.dataItems,(t=>{const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.set("scale",this.get("zoomLevel"))}))}))}));const e=this.get("zoomControl");if(e){const t=this.get("zoomLevel",1);t==this.get("minZoomLevel",1)?this.root.events.once("frameended",(()=>{e.minusButton.set("disabled",!0)})):e.minusButton.set("disabled",!1),t==this.get("maxZoomLevel",32)?e.plusButton.set("disabled",!0):e.plusButton.set("disabled",!1)}}(this.isDirty("translateX")||this.isDirty("translateY"))&&(t.translate([this.get("translateX",this.width()/2),this.get("translateY",this.height()/2)]),this.markDirtyProjection()),t.rotate&&(this.isDirty("rotationX")||this.isDirty("rotationY")||this.isDirty("rotationZ"))&&(t.rotate([this.get("rotationX",0),this.get("rotationY",0),this.get("rotationZ",0)]),this.markDirtyProjection()),(this.isDirty("pinchZoom")||this.get("panX")||this.get("panY"))&&this._setUpTouch()}_fitMap(){const t=this.get("projection");let e=this.innerWidth(),n=this.innerHeight();if(e>0&&n>0){t.fitSize([e,n],this._geometryColection),this.setPrivateRaw("mapScale",t.scale());const i=t.translate();this.setRaw("translateX",i[0]),this.setRaw("translateY",i[1]),this._centerX=i[0],this._centerY=i[1];const o=this.getPrivate("geoPath");this._mapBounds=o.bounds(this._geometryColection),this._geoCentroid=_i(this._geometryColection);const r=yi(this._geometryColection);if(this._geoBounds=r,this._geometryColection.geometries.length>0){r.left=Dn.LI(this._geoBounds.left,3),r.right=Dn.LI(this._geoBounds.right,3),r.top=Dn.LI(this._geoBounds.top,3),r.bottom=Dn.LI(this._geoBounds.bottom,3);const t=this._prevGeoBounds;t&&!vi.MI(r,t)&&(this._dispatchBounds=!0,this._prevGeoBounds=r)}this._mapFitted=!0}}homeGeoPoint(){let t=this.get("homeGeoPoint");if(!t){const e=this.getPrivate("geoPath").bounds(this._geometryColection),n=e[0][0],i=e[0][1],o=e[1][0],r=e[1][1];t=this.invert({x:n+(o-n)/2,y:i+(r-i)/2})}return t}goHome(t){this.zoomToGeoPoint(this.homeGeoPoint(),this.get("homeZoomLevel",1),!0,t,this.get("homeRotationX"),this.get("homeRotationY"))}_updateChildren(){const t=this.get("projection");if(t.invert){let e=this.innerWidth(),n=this.innerHeight();e>0&&n>0&&(this._centerLocation=t.invert([this.innerWidth()/2,this.innerHeight()/2]))}super._updateChildren()}_afterChanged(){if(super._afterChanged(),this._dispatchBounds){this._dispatchBounds=!1;const t="geoboundschanged";this.events.isEnabled(t)&&this.events.dispatch(t,{type:t,target:this})}}_setUpTouch(){this.chartContainer._display.cancelTouch||(this.chartContainer._display.cancelTouch=!!(this.get("pinchZoom")||this.get("panX")||this.get("panY")))}markDirtyGeometries(){this._dirtyGeometries=!0,this.markDirty()}markDirtyProjection(){this.series.each((t=>{t.markDirtyProjection()}))}_afterNew(){this._defaultThemes.push(ie.new(this._root)),this._settings.themeTags=vi.kE(this._settings.themeTags,["map"]),this.children.push(this.bulletsContainer),super._afterNew(),this._makeGeoPath(),this.chartContainer.children.push(this.seriesContainer),null==this.get("translateX")&&this.set("translateX",this.width()/2),null==this.get("translateY")&&this.set("translateY",this.height()/2),this.chartContainer.set("interactive",!0),this.chartContainer.set("interactiveChildren",!1),this.chartContainer.set("background",ue.M.new(this._root,{themeTags:["map","background"],fill:Pn.Q1.fromHex(0),fillOpacity:0})),this._disposers.push(this.chartContainer.events.on("pointerdown",(t=>{this._handleChartDown(t)}))),this._disposers.push(this.chartContainer.events.on("globalpointerup",(t=>{this._handleChartUp(t)}))),this._disposers.push(this.chartContainer.events.on("globalpointermove",(t=>{this._handleChartMove(t)})));let t=!1;for(let e=0;e<xn.u5.licenses.length;e++)xn.u5.licenses[e].match(/^AM5M.{5,}/i)&&(t=!0);t?this._root._licenseApplied():this._root._showBranding(),this._setUpTouch()}_handleChartDown(t){this._downZoomLevel=this.get("zoomLevel",1);const e=this.chartContainer._downPoints;let n=r.HP(e).length;if(1==n){let i=e[1];i||(i=e[0]),i&&i.x==t.point.x&&i.y==t.point.y&&(n=0)}if(n>0){this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");const t=this.chartContainer._getDownPointId();if(t){let e=this._movePoints[t];e&&(this.chartContainer._downPoints[t]=e)}}else if(0==n){let e=this.chartContainer.get("background");if(e&&e.events.enableType("click"),this.get("panX")||this.get("panY")){this._za&&this._za.stop(),this._txa&&this._txa.stop(),this._tya&&this._tya.stop(),this._rxa&&this._rxa.stop(),this._rya&&this._rya.stop();const e=this.chartContainer._display.toLocal(t.point);this._downTranslateX=this.get("translateX"),this._downTranslateY=this.get("translateY"),this._downRotationX=this.get("rotationX"),this._downRotationY=this.get("rotationY"),this._downRotationZ=this.get("rotationZ");let n=this.get("projection");if(n.invert){let t=n.invert([e.x,e.y]),i=n.invert([e.x+1,e.y+1]);t&&i&&(this._pLon=Math.abs(i[0]-t[0]),this._pLat=Math.abs(i[1]-t[1]))}}}}invert(t){let e=this.get("projection");if(e.invert){const n=e.invert([t.x,t.y]);if(n)return{longitude:n[0],latitude:n[1]}}return{longitude:0,latitude:0}}convert(t,e,n){let i,o=this.get("projection");if(o.rotate||(e=void 0,n=void 0),null!=e||null!=n){null==e&&(e=0),null==n&&(n=0);let r=o.rotate();o.rotate([e,n,0]),i=o([t.longitude,t.latitude]),o.rotate(r)}else i=o([t.longitude,t.latitude]);return i?{x:i[0],y:i[1]}:{x:0,y:0}}_handleChartUp(t){this.chartContainer._downPoints={}}_handlePinch(){const t=this.chartContainer;let e=0,n=[],i=[];if(r.__(t._downPoints,((t,o)=>{n[e]=o;let r=this._movePoints[t];r&&(i[e]=r),e++})),n.length>1&&i.length>1){const e=t._display;let o=n[0],r=n[1],s=i[0],a=i[1];if(o&&r&&s&&a){o=e.toLocal(o),r=e.toLocal(r),s=e.toLocal(s),a=e.toLocal(a);let t=Math.hypot(r.x-o.x,r.y-o.y),n=Math.hypot(a.x-s.x,a.y-s.y)/t*this._downZoomLevel;n=Dn.s_(n,this.get("minZoomLevel",1),this.get("maxZoomLevel",32));let i={x:s.x+(a.x-s.x)/2,y:s.y+(a.y-s.y)/2},l={x:o.x+(r.x-o.x)/2,y:o.y+(r.y-o.y)/2},u=this._downTranslateX||0,h=this._downTranslateY||0,c=this._downZoomLevel,p=i.x-(-u+l.x)/c*n,d=i.y-(-h+l.y)/c*n;this.set("zoomLevel",n),this.set("translateX",p),this.set("translateY",d)}}}_handleChartMove(t){const e=this.chartContainer;let n=e._getDownPoint();const i=e._getDownPointId(),o=t.originalEvent.pointerId;if(this.get("pinchZoom")&&o&&(this._movePoints[o]=t.point,r.HP(e._downPoints).length>1))this._handlePinch();else if((!i||!o||o==i)&&n){const i=this.get("panX"),o=this.get("panY");if("none"!=i||"none"!=o){const r=e._display;let s=r.toLocal(t.point);n=r.toLocal(n);let l=this._downTranslateX,u=this._downTranslateY;if(Math.hypot(n.x-s.x,n.y-s.y)>5){let t=e.get("background");if(t&&t.events.disableType("click"),a.Et(l)&&a.Et(u)){let t=this.get("projection");const e=this.get("zoomLevel",1),r=this.get("maxPanOut",.4),a=this._mapBounds,h=this.width(),c=this.height(),p=a[1][0]-a[0][0],d=a[1][1]-a[0][1];if("translateX"==i){l+=s.x-n.x;const t=h/2-(h/2-this._centerX)*e;l=Math.min(l,t+p*r*e),l=Math.max(l,t-p*r*e)}if("translateY"==o){u+=s.y-n.y;const t=c/2-(c/2-this._centerY)*e;u=Math.min(u,t+d*r*e),u=Math.max(u,t-d*r*e)}if(this.set("translateX",l),this.set("translateY",u),t.invert){let e=t.invert([n.x,n.y]);location&&e&&("rotateX"==i&&this.set("rotationX",this._downRotationX-(n.x-s.x)*this._pLon),"rotateY"==o&&this.set("rotationY",this._downRotationY+(n.y-s.y)*this._pLat))}}}}}}_handleWheelRotateY(t,e,n){this._rya=this.animate({key:"rotationY",to:this.get("rotationY",0)-t,duration:e,easing:n})}_handleWheelRotateX(t,e,n){this._rxa=this.animate({key:"rotationX",to:this.get("rotationX",0)-t,duration:e,easing:n})}_handleWheelZoom(t,e){let n=this.get("zoomStep",2),i=this.get("zoomLevel",1),o=i;t>0?o=i/n:t<0&&(o=i*n),o!=i&&this.zoomToPoint(e,o)}zoomToGeoBounds(t,e,n,i){t.right<t.left&&(t.right=180,t.left=-180);const o=this.getPrivate("geoPath").bounds(this._geometryColection);let r=this.convert({longitude:t.left,latitude:t.top},n,i),s=this.convert({longitude:t.right,latitude:t.bottom},n,i);r.y<o[0][1]&&(r.y=o[0][1]),s.y>o[1][1]&&(s.y=o[1][1]);let a=this.get("zoomLevel",1),l=r.x,u=s.x,h=r.y,c=s.y,p=this.seriesContainer,d=.9*Math.min(p.innerWidth()/(u-l)*a,p.innerHeight()/(c-h)*a),f=l+(u-l)/2,g=h+(c-h)/2,m=this.invert({x:f,y:g});return null==n&&null==i||this.rotate(n,i),this.zoomToGeoPoint(m,d,!0,e)}zoomToPoint(t,e,n,i){e&&(e=Dn.s_(e,this.get("minZoomLevel",1),this.get("maxZoomLevel",32))),a.Et(i)||(i=this.get("animationDuration",0));const o=this.get("animationEasing"),r=this.get("zoomLevel",1);this.get("centerMapOnZoomOut")&&e==this.get("homeZoomLevel",1)&&(t=this.convert(this.homeGeoPoint(),this.get("homeRotationX"),this.get("homeRotationY")),n=!0);let s=t.x,l=t.y,u=this.get("translateX",0),h=this.get("translateY",0),c=s,p=l;n&&(c=this.width()/2,p=this.height()/2);let d=c-(s-u)/r*e,f=p-(l-h)/r*e;return this._txa=this.animate({key:"translateX",to:d,duration:i,easing:o}),this._tya=this.animate({key:"translateY",to:f,duration:i,easing:o}),this._za=this.animate({key:"zoomLevel",to:e,duration:i,easing:o}),r!=e&&this._root.readerAlert(this._t("Zoom level changed to %1",this._root.locale,a.um(e))),this._za}zoomToGeoPoint(t,e,n,i,o,r){let s=this.convert(t,o,r);if(null==o&&null==r||this.rotate(o,r,i),s)return this.zoomToPoint(s,e,n,i)}rotate(t,e,n){if(this.get("projection").rotate){a.Et(n)||(n=this.get("animationDuration",0));const i=this.get("animationEasing");null!=t&&this.animate({key:"rotationX",to:t,duration:n,easing:i}),null!=e&&this.animate({key:"rotationY",to:e,duration:n,easing:i})}else;}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.get("zoomLevel",1)/this.get("zoomStep",2))}_clearDirty(){super._clearDirty(),this._dirtyGeometries=!1,this._mapFitted=!1}getArea(t){const e=this.getPrivate("geoPath"),n=t.get("geometry");return n?e.area(n):0}}Object.defineProperty(bi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapChart"}),Object.defineProperty(bi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:le.d.classNames.concat([bi.className])});class wi extends s{constructor(){super(...arguments),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Point","MultiPoint"]}),Object.defineProperty(this,"_lineChangedDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){this.fields.push("polygonId","lineId","longitude","latitude","fixed"),super._afterNew()}markDirtyProjection(){this.markDirty()}markDirtyValues(t){super.markDirtyValues(),t&&this._positionBullets(t)}processDataItem(t){super.processDataItem(t);let e=t.get("geometry");if(e){if("Point"==e.type){const n=e.coordinates;n&&(t.set("longitude",n[0]),t.set("latitude",n[1]))}else if("MultiPoint"==e.type){const n=e.coordinates;n&&n[0]&&(t.set("longitude",n[0][0]),t.set("latitude",n[0][1]))}}else e={type:"Point",coordinates:[t.get("longitude",0),t.get("latitude",0)]},t.set("geometry",e);this._addGeometry(e,this)}_makeBullets(t){t.bullets=[],this.bullets.each((e=>{const n=t.get("geometry");if(n)if("Point"==n.type)this._setBulletParent(this._makeBullet(t,e));else if(n.type="MultiPoint"){let i=0;o.__(n.coordinates,(()=>{this._setBulletParent(this._makeBullet(t,e,i)),i++}))}}))}_setBulletParent(t){if(t){const e=t.get("sprite"),n=this.chart;if(e&&n){const t=e.dataItem;t&&(t.get("fixed")?e.parent!=n.bulletsContainer&&n.bulletsContainer.children.moveValue(e):e.parent!=this.bulletsContainer&&this.bulletsContainer.children.moveValue(e))}}}_positionBullet(t){const e=t.get("sprite");if(e){const n=e.dataItem;if(n&&n.get("fixed"))return;const i=n.get("latitude"),o=n.get("longitude"),r=n.get("lineDataItem"),s=n.get("fixed"),l=this.chart;let u;if(r)u=r.get("mapLine");else{const t=n.get("lineId");t&&l&&l.series.each((e=>{if(e.isType("MapLineSeries")){let i=e.getDataItemById(t);i&&(n.set("lineDataItem",i),u=i.get("mapLine"))}}))}this._lineChangedDp&&this._lineChangedDp.dispose(),u&&(this._lineChangedDp=u.events.on("linechanged",(()=>{this._positionBullets(n)})));const h=n.get("polygonDataItem");let c;if(h)c=h.get("mapPolygon");else{const t=n.get("polygonId");t&&l&&l.series.each((e=>{if(e.isType("MapPolygonSeries")){let i=e.getDataItemById(t);i&&(n.set("polygonDataItem",i),c=i.get("mapPolygon"))}}))}const p=n.get("positionOnLine");let d,f;if(c){let t=c.visualCentroid();d=[t.longitude,t.latitude],n.setRaw("longitude",t.longitude),n.setRaw("latitude",t.latitude)}else if(u&&a.Et(p)){let e=u.positionToGeoPoint(p);if(d=[e.longitude,e.latitude],n.get("autoRotate",t.get("autoRotate"))&&l){const t=u.positionToGeoPoint(p-.002),e=u.positionToGeoPoint(p+.002),n=l.convert(t),i=l.convert(e);f=Dn._H(n,i)}n.setRaw("longitude",e.longitude),n.setRaw("latitude",e.latitude)}else if(a.Et(o)&&a.Et(i))d=[o,i];else{const e=n.get("geometry");if(e)if("Point"==e.type)this._positionBulletReal(t,e,e.coordinates,f);else if("MultiPoint"==e.type){let n=t._index||0;d=e.coordinates[n]}}!s&&d&&this._positionBulletReal(t,{type:"Point",coordinates:d},d,f)}}_positionBulletReal(t,e,n,i){const o=t.get("sprite"),r=this.chart;if(r){const s=r.get("projection"),a=r.getPrivate("geoPath"),l=o.dataItem,u=s(n);if(u){const t={x:u[0],y:u[1]};o.setAll(t),l.setRaw("point",t)}let h=!0;a(e)?this.get("clipFront")&&(h=!1):this.get("clipBack")&&(h=!1),o.setPrivate("visible",h),l.set("clipped",!h),l&&null!=i&&l.get("autoRotate",t.get("autoRotate"))&&o.set("rotation",i+l.get("autoRotateAngle",t.get("autoRotateAngle",0)))}}zoomToDataItem(t,e,n){const i=this.chart;if(i){const o=t.get("longitude",0),r=t.get("latitude",0);return n?i.zoomToGeoPoint({longitude:o,latitude:r},e,!0,void 0,-o,-r):i.zoomToGeoPoint({longitude:o,latitude:r},e,!0)}}zoomToDataItems(t,e){let n=null,i=null,r=null,s=null;if(o.__(t,(t=>{const e=t.get("longitude",0),o=t.get("latitude",0);(null==n||n>e)&&(n=e),(null==i||i<e)&&(i=e),(null==r||r<o)&&(r=o),(null==s||s>o)&&(s=o)})),null!=n&&null!=i&&null!=r&&null!=s){const t=this.chart;if(t)return e?t.zoomToGeoBounds({left:n,right:i,top:r,bottom:s},void 0,-(n+(i-n)/2),-(r+(r-s)/2)):t.zoomToGeoBounds({left:n,right:i,top:r,bottom:s})}}disposeDataItem(t){const e=this.chart;e&&e.series.each((e=>{e.isType("MapLineSeries")&&o.__(e.dataItems,(n=>{const i=n.get("pointsToConnect");i&&o.__(i,(r=>{r==t&&(o.TF(i,r),e.markDirtyValues(n))}))}))})),super.disposeDataItem(t)}_excludeDataItem(t){super._excludeDataItem(t);const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!1)}))}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!0)}))}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!1)}))}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.setPrivate("visible",!0)}))}}Object.defineProperty(wi,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPointSeries"}),Object.defineProperty(wi,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.classNames.concat([wi.className])});var Pi=n(1304),xi=n.n(Pi);class Di extends u.A{constructor(){super(...arguments),Object.defineProperty(this,"_projectionDirty",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(this,"series",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.setPrivate("trustBounds",!0)}_beforeChanged(){if(super._beforeChanged(),this._projectionDirty||this.isDirty("geometry")||this.isDirty("precision")){const t=this.get("geometry");if(t){const e=this.series;if(e){const n=e.projection();n&&n.precision(this.get("precision",.5));const i=e.geoPath();i&&(this._clear=!0,this.set("draw",(e=>{i.context(this._display),i(t),i.context(null)})),this.isHover()&&this.showTooltip())}}}}markDirtyProjection(){this.markDirty(),this._projectionDirty=!0}_clearDirty(){super._clearDirty(),this._projectionDirty=!1}geoCentroid(){const t=this.get("geometry");return t?_i(t):{latitude:0,longitude:0}}visualCentroid(){let t=0,e=[];const n=this.get("geometry");if(n){if("Polygon"==n.type)e=n.coordinates;else if("MultiPolygon"==n.type)for(let i=0;i<n.coordinates.length;i++){let o=n.coordinates[i],r=ri({type:"Polygon",coordinates:o});r>t&&(e=o,t=r)}if(e){let t=xi()(e);return{longitude:t[0],latitude:t[1]}}}return{longitude:0,latitude:0}}_getTooltipPoint(){const t=this.series;if(t){const e=t.projection();if(e){const t=this.visualCentroid(),n=e([t.longitude,t.latitude]);if(n)return{x:n[0],y:n[1]}}}return{x:0,y:0}}}Object.defineProperty(Di,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygon"}),Object.defineProperty(Di,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.A.classNames.concat([Di.className])});class Si extends s{constructor(){super(...arguments),Object.defineProperty(this,"mapPolygons",{enumerable:!0,configurable:!0,writable:!0,value:new K.TS(tt.Bj.new({}),(()=>Di._new(this._root,{},[this.mapPolygons.template])))}),Object.defineProperty(this,"_types",{enumerable:!0,configurable:!0,writable:!0,value:["Polygon","MultiPolygon"]})}makeMapPolygon(t){const e=this.children.push(this.mapPolygons.make());return e._setDataItem(t),this.mapPolygons.push(e),e}markDirtyProjection(){o.__(this.dataItems,(t=>{let e=t.get("mapPolygon");e&&e.markDirtyProjection()}))}_prepareChildren(){super._prepareChildren(),this.isDirty("fill")&&this.mapPolygons.template.set("fill",this.get("fill")),this.isDirty("stroke")&&this.mapPolygons.template.set("stroke",this.get("stroke"))}processDataItem(t){super.processDataItem(t);let e=t.get("mapPolygon");e||(e=this.makeMapPolygon(t)),t.set("mapPolygon",e);let n=t.get("geometry");if(n){if(this.get("reverseGeodata")){if(n.coordinates)for(let t=0;t<n.coordinates.length;t++)if("MultiPolygon"==n.type)for(let e=0;e<n.coordinates[t].length;e++)n.coordinates[t][e].reverse();else n.coordinates[t].reverse()}e.set("geometry",n)}e.series=this,this._addGeometry(t.get("geometry"),this)}disposeDataItem(t){super.disposeDataItem(t);const e=t.get("mapPolygon");e&&(this.mapPolygons.removeValue(e),e.dispose()),this._removeGeometry(t.get("geometry"))}_excludeDataItem(t){super._excludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unexcludeDataItem(t){super._unexcludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}_notIncludeDataItem(t){super._notIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!1)}_unNotIncludeDataItem(t){super._unNotIncludeDataItem(t);const e=t.get("mapPolygon");e&&e.setPrivate("visible",!0)}markDirtyValues(t){if(super.markDirtyValues(),t){const e=t.get("mapPolygon");e&&e.set("geometry",t.get("geometry"))}}zoomToDataItem(t,e){const n=t.get("mapPolygon");if(n){const t=n.get("geometry"),i=this.chart;if(t&&i){if(e){const e=_i(t);return i.rotate(-e.longitude,-e.latitude),i.zoomToGeoBounds(yi(t),void 0,-e.longitude,-e.latitude)}return i.zoomToGeoBounds(yi(t))}}}zoomToDataItems(t,e){let n,i,r,s;if(o.__(t,(t=>{const e=t.get("mapPolygon");if(e){const t=e.get("geometry");if(t){let e=yi(t);null==n&&(n=e.left),null==i&&(i=e.right),null==r&&(r=e.top),null==s&&(s=e.bottom),n=Math.min(e.left,n),i=Math.max(e.right,i),r=Math.max(e.top,r),s=Math.min(e.bottom,s)}}})),null!=n&&null!=i&&null!=r&&null!=s){const t=this.chart;if(t){if(e){const e=n+(i-n)/2,o=s+(r-s)/2;return t.rotate(-e,-o),t.zoomToGeoBounds({left:n,right:i,top:r,bottom:s},void 0,-e,-o)}return t.zoomToGeoBounds({left:n,right:i,top:r,bottom:s})}}}getPolygonByPoint(t){let e;const n=this._display._renderer.getObjectAtPoint(t);if(n)return this.mapPolygons.each((function(t){t._display==n&&(e=t)})),e}getPolygonByGeoPoint(t){return this.getPolygonByPoint(this.chart.convert(t))}}Object.defineProperty(Si,"className",{enumerable:!0,configurable:!0,writable:!0,value:"MapPolygonSeries"}),Object.defineProperty(Si,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:s.classNames.concat([Si.className])});var Ii=n(1854),Mi=n(7294),ji=n(9867),Ci=n(3626);class Ni extends wi{constructor(){super(...arguments),Object.defineProperty(this,"_dataItem",{enumerable:!0,configurable:!0,writable:!0,value:this.makeDataItem({})}),Object.defineProperty(this,"_clusterIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_clusters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"clusteredDataItems",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_scatterIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_scatters",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_packLayout",{enumerable:!0,configurable:!0,writable:!0,value:Ci.A()}),Object.defineProperty(this,"_spiral",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(this,"_clusterDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_previousZL",{enumerable:!0,configurable:!0,writable:!0,value:0})}_afterNew(){this.fields.push("groupId"),this._setRawDefault("groupIdField","groupId"),super._afterNew()}_updateChildren(){super._updateChildren(),this.isDirty("scatterRadius")&&(this._spiral=Dn.RF(0,0,300,300,0,3,3,0,0));const t=this.chart;if(t){const e=t.get("zoomLevel",1);if(e!=this._previousZL){const t=this.get("clusterDelay",0);t?this._clusterDP?(this._clusterDP.dispose(),this._clusterDP=this.setTimeout((()=>{this._doTheCluster()}),t)):(this._doTheCluster(),this._clusterDP=this.setTimeout((()=>{}),0)):this._doTheCluster(),this._previousZL=e}o.__(this.clusteredDataItems,(t=>{const e=t.get("bullet"),n=t.get("longitude",0),i=t.get("latitude",0);this._positionBulletReal(e,{type:"Point",coordinates:[n,i]},[n,i])}))}}_doTheCluster(){const t={};o.__(this.dataItems,(e=>{const n=e.get("groupId","_default");t[n]||(t[n]=[]),t[n].push(e)})),this._scatterIndex=-1,this._scatters=[],this._clusterIndex=-1,this._clusters=[],o.__(this.clusteredDataItems,(t=>{t.setRaw("children",void 0)})),o.__(this.dataItems,(t=>{t.setRaw("cluster",void 0)})),r.__(t,((t,e)=>{this._scatterGroup(e)})),r.__(t,((t,e)=>{this._clusterGroup(e)})),o.__(this.dataItems,(t=>{if(!t.get("cluster")){const e=t.bullets;e&&o.__(e,(t=>{const e=t.get("sprite");e&&e.set("forceHidden",!1)}))}}))}zoomToCluster(t,e){this.zoomToDataItems(t.get("children",[]),e)}_clusterGroup(t){const e=this.chart;if(e&&e.get("zoomLevel",1)>=e.get("maxZoomLevel",100)*this.get("stopClusterZoom",.95));else for(t.sort(((t,e)=>{const n=t.get("point"),i=e.get("point");return n&&i?Math.hypot(n.x-i.x,n.y-i.y):0}));t.length>0;){this._clusterIndex++,this._clusters[this._clusterIndex]=[];const e=this._clusters[this._clusterIndex],n=t[0];e.push(n),o.dm(t,n),this._clusterDataItem(n,t)}let n=0;const i=this.get("clusteredBullet");i&&o.__(this._clusters,(t=>{let e=0,r=0,s=t.length;if(s>1){let a,l=this.clusteredDataItems[n];if(!l){l=new Ii.s(this,void 0,{});const t=l.set("bullet",i(this._root,this,l));if(t){const e=t.get("sprite");e&&(this.bulletsContainer.children.push(e),e._setDataItem(l),this.root.events.once("frameended",(()=>{e instanceof Mi.m&&e.walkChildren((t=>{t instanceof Ii.u&&t.markDirtyValues()}))})))}this.clusteredDataItems.push(l)}o.__(t,(t=>{t.setRaw("cluster",l);const n=t.get("point");n&&(e+=n.x,r+=n.y);const i=t.bullets;i&&o.__(i,(t=>{const e=t.get("sprite");e&&e.set("forceHidden",!0)})),a=t.get("groupId")}));let u=e/s,h=r/s;l.setRaw("children",t),l.setRaw("groupId",a);const c=l.get("value");l.setRaw("value",s);const p=l.get("bullet");if(p){let t=this.chart.invert({x:u,y:h});t&&l.setAll({longitude:t.longitude,latitude:t.latitude}),this._positionBullets(l);const e=p.get("sprite");e&&(e.set("forceHidden",!1),c!=s&&e instanceof Mi.m&&e.walkChildren((t=>{t instanceof ji.J&&t.text.markDirtyText()})))}n++}})),o.__(this.clusteredDataItems,(t=>{let e=t.get("children");if(!e||0==e.length){const e=t.get("bullet");if(e){const t=e.get("sprite");t&&t.set("forceHidden",!0)}}}))}_onDataClear(){super._onDataClear(),o.__(this.clusteredDataItems,(t=>{const e=t.get("bullet");if(e){const t=e.get("sprite");t&&t.dispose()}})),this.clusteredDataItems=[]}_clusterDataItem(t,e){const n=t.get("point");if(n){let t=this.get("minDistance",20);const i=this._clusters[this._clusterIndex];for(let r=e.length-1;r>=0;r--){const s=e[r];if(s&&!s.get("clipped")){const r=s.get("point");r&&Math.hypot(r.x-n.x,r.y-n.y)<t&&(i.push(s),o.dm(e,s),this._clusterDataItem(s,e))}}}}_scatterGroup(t){const e=this.chart;if(e&&e.get("zoomLevel",1)>=e.get("maxZoomLevel",100)*this.get("stopClusterZoom",.95)){for(;t.length>0;){this._scatterIndex++,this._scatters[this._scatterIndex]=[];const e=this._scatters[this._scatterIndex],n=t[0];e.push(n),o.TF(t,n),this._scatterDataItem(n,t)}o.__(this._scatters,(t=>{if(t.length>1){let e=[],n=0,i=this.get("scatterRadius",8);o.__(t,(t=>{let r=this._spiral[n],s=!0;if(e.length>0)for(;s;)o.__(e,(t=>{for(s=!1;Dn.FM({x:r.x,y:r.y,radius:i},t);)n++,void 0==this._spiral[n]?s=!1:(s=!0,r=this._spiral[n])}));const a=r.x,l=r.y;e.push({x:a,y:l,radius:i}),t.set("dx",a),t.set("dy",l);const u=t.bullets;u&&o.__(u,(t=>{const e=t.get("sprite");e&&e.setAll({dx:a,dy:l})}))}))}}))}}_scatterDataItem(t,e){const n=t.get("point");if(n){const t=this.get("scatterDistance",5),i=this._scatters[this._scatterIndex];o.__(e,(r=>{if(r&&!r.get("clipped")){const s=r.get("point");s&&Math.hypot(s.x-n.x,s.y-n.y)<t&&(i.push(r),o.dm(e,r),this._scatterDataItem(r,e))}}))}}}Object.defineProperty(Ni,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ClusteredPointSeries"}),Object.defineProperty(Ni,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:wi.classNames.concat([Ni.className])});var Oi=n(8139);class Ti extends Oi.V{_afterNew(){super._afterNew(),this.addTag("zoomtools")}_prepareChildren(){super._prepareChildren(),this.isPrivateDirty("chart")&&this.set("target",this.getPrivate("chart"))}}Object.defineProperty(Ti,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomControl"}),Object.defineProperty(Ti,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:Oi.V.classNames.concat([Ti.className])})},1304:(t,e,n)=>{var i=n(4993);function o(t,e,n){var o,a,l,u;e=e||1;for(var h=0;h<t[0].length;h++){var c=t[0][h];(!h||c[0]<o)&&(o=c[0]),(!h||c[1]<a)&&(a=c[1]),(!h||c[0]>l)&&(l=c[0]),(!h||c[1]>u)&&(u=c[1])}var p=l-o,d=u-a,f=Math.min(p,d),g=f/2;if(0===f){var m=[o,a];return m.distance=0,m}for(var _=new i(void 0,r),y=o;y<l;y+=f)for(var v=a;v<u;v+=f)_.push(new s(y+g,v+g,g,t));var b=function(t){for(var e=0,n=0,i=0,o=t[0],r=0,a=o.length,l=a-1;r<a;l=r++){var u=o[r],h=o[l],c=u[0]*h[1]-h[0]*u[1];n+=(u[0]+h[0])*c,i+=(u[1]+h[1])*c,e+=3*c}return 0===e?new s(o[0][0],o[0][1],0,t):new s(n/e,i/e,0,t)}(t),w=new s(o+p/2,a+d/2,0,t);w.d>b.d&&(b=w);for(var P=_.length;_.length;){var x=_.pop();x.d>b.d&&(b=x,n&&console.log("found best %d after %d probes",Math.round(1e4*x.d)/1e4,P)),x.max-b.d<=e||(g=x.h/2,_.push(new s(x.x-g,x.y-g,g,t)),_.push(new s(x.x+g,x.y-g,g,t)),_.push(new s(x.x-g,x.y+g,g,t)),_.push(new s(x.x+g,x.y+g,g,t)),P+=4)}n&&(console.log("num probes: "+P),console.log("best distance: "+b.d));var D=[b.x,b.y];return D.distance=b.d,D}function r(t,e){return e.max-t.max}function s(t,e,n,i){this.x=t,this.y=e,this.h=n,this.d=function(t,e,n){for(var i=!1,o=1/0,r=0;r<n.length;r++)for(var s=n[r],l=0,u=s.length,h=u-1;l<u;h=l++){var c=s[l],p=s[h];c[1]>e!==p[1]>e&&t<(p[0]-c[0])*(e-c[1])/(p[1]-c[1])+c[0]&&(i=!i),o=Math.min(o,a(t,e,c,p))}return 0===o?0:(i?1:-1)*Math.sqrt(o)}(t,e,i),this.max=this.d+this.h*Math.SQRT2}function a(t,e,n,i){var o=n[0],r=n[1],s=i[0]-o,a=i[1]-r;if(0!==s||0!==a){var l=((t-o)*s+(e-r)*a)/(s*s+a*a);l>1?(o=i[0],r=i[1]):l>0&&(o+=s*l,r+=a*l)}return(s=t-o)*s+(a=e-r)*a}i.default&&(i=i.default),t.exports=o,t.exports.default=o},4993:(t,e,n)=>{n.r(e),n.d(e,{default:()=>i});class i{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o;if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let n=(this.length>>1)-1;n>=0;n--)this._down(n)}push(t){this.data.push(t),this.length++,this._up(this.length-1)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return this.length--,this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const o=t-1>>1,r=e[o];if(n(i,r)>=0)break;e[t]=r,t=o}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,o=e[t];for(;t<i;){let i=1+(t<<1),r=e[i];const s=i+1;if(s<this.length&&n(e[s],r)<0&&(i=s,r=e[s]),n(r,o)>=0)break;e[t]=r,t=i}e[t]=o}}function o(t,e){return t<e?-1:t>e?1:0}},2659:(t,e,n)=>{function i(t){return null==t?null:o(t)}function o(t){if("function"!==typeof t)throw new Error;return t}n.d(e,{l:()=>i,m:()=>o})},7619:(t,e,n)=>{function i(){return 0}function o(t){return function(){return t}}n.d(e,{A:()=>o,P:()=>i})},3626:(t,e,n)=>{n.d(e,{A:()=>P});var i=n(2659),o=n(7619);const r=1664525,s=1013904223,a=4294967296;function l(t,e){for(var n,i,o=0,r=(t=function(t,e){let n,i,o=t.length;for(;o;)i=e()*o--|0,n=t[o],t[o]=t[i],t[i]=n;return t}(Array.from(t),e)).length,s=[];o<r;)n=t[o],i&&c(i,n)?++o:(i=d(s=u(s,n)),o=0);return i}function u(t,e){var n,i;if(p(e,t))return[e];for(n=0;n<t.length;++n)if(h(e,t[n])&&p(f(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(i=n+1;i<t.length;++i)if(h(f(t[n],t[i]),e)&&h(f(t[n],e),t[i])&&h(f(t[i],e),t[n])&&p(g(t[n],t[i],e),t))return[t[n],t[i],e];throw new Error}function h(t,e){var n=t.r-e.r,i=e.x-t.x,o=e.y-t.y;return n<0||n*n<i*i+o*o}function c(t,e){var n=t.r-e.r+1e-9*Math.max(t.r,e.r,1),i=e.x-t.x,o=e.y-t.y;return n>0&&n*n>i*i+o*o}function p(t,e){for(var n=0;n<e.length;++n)if(!c(t,e[n]))return!1;return!0}function d(t){switch(t.length){case 1:return function(t){return{x:t.x,y:t.y,r:t.r}}(t[0]);case 2:return f(t[0],t[1]);case 3:return g(t[0],t[1],t[2])}}function f(t,e){var n=t.x,i=t.y,o=t.r,r=e.x,s=e.y,a=e.r,l=r-n,u=s-i,h=a-o,c=Math.sqrt(l*l+u*u);return{x:(n+r+l/c*h)/2,y:(i+s+u/c*h)/2,r:(c+o+a)/2}}function g(t,e,n){var i=t.x,o=t.y,r=t.r,s=e.x,a=e.y,l=e.r,u=n.x,h=n.y,c=n.r,p=i-s,d=i-u,f=o-a,g=o-h,m=l-r,_=c-r,y=i*i+o*o-r*r,v=y-s*s-a*a+l*l,b=y-u*u-h*h+c*c,w=d*f-p*g,P=(f*b-g*v)/(2*w)-i,x=(g*m-f*_)/w,D=(d*v-p*b)/(2*w)-o,S=(p*_-d*m)/w,I=x*x+S*S-1,M=2*(r+P*x+D*S),j=P*P+D*D-r*r,C=-(Math.abs(I)>1e-6?(M+Math.sqrt(M*M-4*I*j))/(2*I):j/M);return{x:i+P+x*C,y:o+D+S*C,r:C}}function m(t,e,n){var i,o,r,s,a=t.x-e.x,l=t.y-e.y,u=a*a+l*l;u?(o=e.r+n.r,o*=o,s=t.r+n.r,o>(s*=s)?(i=(u+s-o)/(2*u),r=Math.sqrt(Math.max(0,s/u-i*i)),n.x=t.x-i*a-r*l,n.y=t.y-i*l+r*a):(i=(u+o-s)/(2*u),r=Math.sqrt(Math.max(0,o/u-i*i)),n.x=e.x+i*a-r*l,n.y=e.y+i*l+r*a)):(n.x=e.x+n.r,n.y=e.y)}function _(t,e){var n=t.r+e.r-1e-6,i=e.x-t.x,o=e.y-t.y;return n>0&&n*n>i*i+o*o}function y(t){var e=t._,n=t.next._,i=e.r+n.r,o=(e.x*n.r+n.x*e.r)/i,r=(e.y*n.r+n.y*e.r)/i;return o*o+r*r}function v(t){this._=t,this.next=null,this.previous=null}function b(t,e){if(!(s=(n=t,t="object"===typeof n&&"length"in n?n:Array.from(n)).length))return 0;var n,i,o,r,s,a,u,h,c,p,d,f;if((i=t[0]).x=0,i.y=0,!(s>1))return i.r;if(o=t[1],i.x=-o.r,o.x=i.r,o.y=0,!(s>2))return i.r+o.r;m(o,i,r=t[2]),i=new v(i),o=new v(o),r=new v(r),i.next=r.previous=o,o.next=i.previous=r,r.next=o.previous=i;t:for(h=3;h<s;++h){m(i._,o._,r=t[h]),r=new v(r),c=o.next,p=i.previous,d=o._.r,f=i._.r;do{if(d<=f){if(_(c._,r._)){o=c,i.next=o,o.previous=i,--h;continue t}d+=c._.r,c=c.next}else{if(_(p._,r._)){(i=p).next=o,o.previous=i,--h;continue t}f+=p._.r,p=p.previous}}while(c!==p.next);for(r.previous=i,r.next=o,i.next=o.previous=o=r,a=y(i);(r=r.next)!==o;)(u=y(r))<a&&(i=r,a=u);o=i.next}for(i=[o._],r=o;(r=r.next)!==o;)i.push(r._);for(r=l(i,e),h=0;h<s;++h)(i=t[h]).x-=r.x,i.y-=r.y;return r.r}function w(t){return Math.sqrt(t.value)}function P(){var t=null,e=1,n=1,l=o.P;function u(i){const u=function(){let t=1;return()=>(t=(r*t+s)%a)/a}();return i.x=e/2,i.y=n/2,t?i.eachBefore(x(t)).eachAfter(D(l,.5,u)).eachBefore(S(1)):i.eachBefore(x(w)).eachAfter(D(o.P,1,u)).eachAfter(D(l,i.r/Math.min(e,n),u)).eachBefore(S(Math.min(e,n)/(2*i.r))),i}return u.radius=function(e){return arguments.length?(t=(0,i.l)(e),u):t},u.size=function(t){return arguments.length?(e=+t[0],n=+t[1],u):[e,n]},u.padding=function(t){return arguments.length?(l="function"===typeof t?t:(0,o.A)(+t),u):l},u}function x(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function D(t,e,n){return function(i){if(o=i.children){var o,r,s,a=o.length,l=t(i)*e||0;if(l)for(r=0;r<a;++r)o[r].r+=l;if(s=b(o,n),l)for(r=0;r<a;++r)o[r].r-=l;i.r=s+l}}}function S(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}}}]);
//# sourceMappingURL=json_map.413e786e.chunk.js.map